<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 1. T√≠tulo espec√≠fico de la p√°gina -->
    <title>JUEGOS</title>
    
    <!-- 2. Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 3. Carga de Fuentes de Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Lato:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <!-- AGREGADO: Font Awesome para los iconos de flechas -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- 4. Configuraci√≥n de Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Lato', 'sans-serif'],
                        heading: ['Playfair Display', 'serif'],
                        script: ['Great Vibes', 'cursive'],
                    }
                }
            }
        }
    </script>
    
    <!-- 5. Estilos -->
    <style>
        /* Estilos generales (compatibles con las otras p√°ginas) */
        .heart-particle {
            position: fixed;
            font-size: 24px;
            color: #e11d48;
            pointer-events: none;
            z-index: 1000;
            animation: floatUp 4s ease-out forwards;
        }
        @keyframes floatUp {
            0% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-800px) translateX(var(--random-x)) scale(0.5);
                opacity: 0;
            }
        }

        /* --- Estilos Espec√≠ficos para los Juegos --- */
        
        /* Sub-men√∫ interno de juegos */
        .game-nav-link {
            padding: 0.5rem 1rem;
            border-radius: 999px; /* pill */
            font-weight: 600;
            color: #4b5563; /* text-gray-600 */
            background-color: #f9fafb; /* bg-gray-50 */
            border: 2px solid #fecdd3; /* border-rose-200 */
            transition: all 0.2s ease;
        }
        .game-nav-link:hover {
            background-color: #ffe4e6;
            color: #be185d; /* text-pink-600 */
        }
        .game-nav-link.active-game {
            background-color: #e11d48; /* bg-rose-600 */
            color: white;
            border-color: #e11d48;
        }

        /* Tic-Tac-Toe */
        .ttt-cell { transition: background-color 0.2s ease; }
        .ttt-cell:hover { background-color: #ffe4e6; }

        /* Memorama */
        .memo-card { perspective: 1000px; }
        .memo-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .memo-card.is-flipped .memo-card-inner { transform: rotateY(180deg); }
        .memo-card-front, .memo-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
        }
        .memo-card-front {
            background-color: #fbcfe8;
            border: 2px solid white;
            font-size: 3rem;
            color: #e11d48;
        }
        .memo-card-back {
            background-color: #ffffff;
            border: 2px solid #fecdd3;
            transform: rotateY(180deg);
        }
        .memo-card-back img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 0.5rem;
        }
        /* Borde verde cuando se encuentra el par */
        .memo-matched {
            border-color: #4ade80 !important; 
            box-shadow: 0 0 10px #4ade80;
        }

        /* Sopa de Letras */
        .sopa-cell {
            font-family: monospace;
            text-transform: uppercase;
            transition: background-color 0.1s ease;
        }
        .sopa-cell.selected {
            background-color: #fbcfe8;
            color: #be185d;
        }
        .sopa-word.found {
            text-decoration: line-through;
            color: #9ca3af;
        }

        /* Ahorcado */
        .ahorcado-letter {
            width: 2.5rem;
            height: 3rem;
            border-bottom: 4px solid #fecdd3;
        }
        .ahorcado-letter.filled { border-bottom-color: #e11d48; }
        .keyboard-key { transition: all 0.1s ease; }
        .keyboard-key:disabled { opacity: 0.3; background-color: #e5e7eb; }

        /* Unidos por la Eternidad */
        #unidosCanvas {
            background-color: #fafaf9;
            border: 4px solid #fecdd3;
            border-radius: 0.5rem;
            max-width: 100%;
        }
        
        /* B√©isbol */
        #baseballCanvas {
            /* Fondo base por si el JS falla */
            background: #4ade80;
            border: 4px solid #1f2937; /* Gray-800 */
            border-radius: 0.5rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.3);
            cursor: crosshair;
            max-width: 100%;
        }

        /* F√∫tbol */
        #soccerCanvas {
            background: #22c55e;
            border: 4px solid #e5e7eb;
            border-radius: 0.5rem;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.2);
            max-width: 100%;
        }

        /* --- ESTILOS NUEVOS: CONTROLES T√ÅCTILES --- */
        .touch-controls {
            display: flex; /* Flex para alinear */
            gap: 20px;
            justify-content: center;
            margin-top: 15px;
            user-select: none; /* Evitar selecci√≥n de texto al tocar */
            -webkit-user-select: none;
        }
        
        .d-pad {
            display: grid;
            grid-template-columns: repeat(3, 50px);
            grid-template-rows: repeat(2, 50px);
            gap: 5px;
            align-items: center;
            justify-items: center;
        }

        /* Botones individuales */
        .d-btn {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #e5e7eb;
            border-radius: 50%; /* Redondos */
            font-size: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            transition: transform 0.1s, background-color 0.1s;
            color: #555; /* Color base del icono */
        }

        .d-btn:active, .d-btn.active {
            transform: scale(0.9);
            background-color: #ffe4e6; /* rose-100 */
            border-color: #e11d48; /* rose-600 */
            color: #e11d48;
        }

        /* Posicionamiento en la cuadr√≠cula D-PAD */
        .btn-up { grid-column: 2; grid-row: 1; }
        .btn-left { grid-column: 1; grid-row: 2; }
        .btn-down { grid-column: 2; grid-row: 2; }
        .btn-right { grid-column: 3; grid-row: 2; }

        /* Colores espec√≠ficos para f√∫tbol */
        .d-btn.p1 { border-color: #fda4af; color: #e11d48; } /* Rosa P1 */
        .d-btn.p1:active { background-color: #fff1f2; }

        .d-btn.p2 { border-color: #93c5fd; color: #2563eb; } /* Azul P2 */
        .d-btn.p2:active { background-color: #eff6ff; }

    </style>
</head>
<body class="bg-rose-50 font-sans text-gray-700">

    <!-- Barra Superior -->
    <div class="bg-white p-4 shadow-sm sticky top-0 z-50">
        <div class="container mx-auto max-w-5xl flex justify-between items-center">
            
            <!-- Logo/Iniciales -->
            <div class="font-heading text-3xl font-bold text-gray-800">
                <span class="w-20 h-20 mx-auto block rounded-full overflow-hidden">
                    <img src="imagenes/logo.png" alt="Logo" class="w-full h-full object-cover" onerror="this.src='https://placehold.co/100x100/ffccd5/e11d48?text=L'">
                </span>
            </div>
            
            <!-- Men√∫ de Navegaci√≥n -->
            <nav class="flex gap-4 sm:gap-6 flex-wrap justify-end">
                <a href="home.html" 
                   class="text-gray-600 font-medium hover:text-rose-600 transition-colors duration-200">Inicio</a>
                
                <a href="galeria.html" 
                   class="text-gray-600 font-medium hover:text-rose-600 transition-colors duration-200">Galer√≠a</a>
                
                <a href="video.html" 
                   class="text-gray-600 font-medium hover:text-rose-600 transition-colors duration-200">Video</a>
                
                <a href="carta.html" 
                   class="text-gray-600 font-medium hover:text-rose-600 transition-colors duration-200">Carta</a>
                
                <!-- Enlace activo para JUEGOS -->
                <a href="juegos.html" 
                   class="text-rose-600 font-bold transition-colors duration-200">Juegos</a>
                
                <!-- BOT√ìN DE SALIR -->
                <button id="logout-button" 
                        class="text-gray-500 font-medium hover:text-rose-600 transition-colors duration-200 border-l pl-4 sm:pl-6 border-gray-200">
                    Salir
                </button>
            </nav>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="bg-gradient-to-r from-pink-300 to-rose-200 text-center py-24 sm:py-32 relative overflow-hidden">
        <div class="relative z-10">
            <h1 class="font-heading text-7xl sm:text-8xl text-white font-bold tracking-tight mb-4 drop-shadow-lg">
                Para Mi Amor
            </h1>
            <p class="font-heading text-2xl sm:text-3xl text-white opacity-90 mb-6 drop-shadow">
                Un peque√±o rinc√≥n de nuestro mundo.
            </p>
        </div>
    </section>

    <!-- Contenedor principal -->
    <div class="container mx-auto max-w-5xl p-4 sm:p-8 relative z-10 -mt-16">
        <main>
            
            <!-- ======================= -->
            <!-- ¬† P√ÅGINA 5: JUEGOS ¬† ¬† ¬† -->
            <!-- ======================= -->
            <section id="page-games" class="bg-white p-8 sm:p-12 rounded-2xl shadow-lg">
                <h2 class="font-heading text-4xl text-center text-rose-600 mb-8 border-b pb-4 border-rose-100">Nuestros Juegos</h2>

                <!-- Sub-Men√∫ de Juegos -->
                <div class="flex justify-center gap-2 sm:gap-4 mb-8 flex-wrap">
                    <button class="game-nav-link active-game" data-game="tic-tac-toe">Tres en Raya</button>
                    <button class="game-nav-link" data-game="memorama">Memorama</button>
                    <button class="game-nav-link" data-game="sopa-letras">Sopa de Letras</button>
                    <button class="game-nav-link" data-game="unidos">Unidos por la Eternidad</button>
                    <button class="game-nav-link" data-game="baseball">B√©isbol</button>
                    <button class="game-nav-link" data-game="soccer">F√∫tbol</button>
                </div>

                <!-- Contenedor para el juego activo -->
                <div id="game-container" class="mt-8">

                    <!-- --- Juego 1: Tres en Raya --- -->
                    <div id="game-tic-tac-toe" class="game-content">
                        <p class="text-lg text-center text-gray-700 mb-4">
                            Un cl√°sico... ¬°Tres en Raya!
                        </p>
                        <div id="tttStatusMessage" class="text-center text-2xl font-semibold text-gray-800 mb-6 h-8">
                            Turno del jugador X
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-3 gap-2 sm:gap-4 w-max mx-auto">
                                <div data-cell-index="0" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="1" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="2" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="3" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="4" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="5" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="6" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="7" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="8" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                            </div>
                        </div>
                        <div class="text-center mt-8">
                            <button id="tttResetButton" class="bg-rose-500 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition-all duration-300 hover:bg-rose-700 hover:shadow-xl active:scale-95">
                                Reiniciar Juego
                            </button>
                        </div>
                    </div>

                    <!-- --- Juego 2: Memorama --- -->
                    <div id="game-memorama" class="game-content hidden">
                        <p class="text-lg text-center text-gray-700 mb-4">
                            Encuentra los pares. ¬°Usa nuestras fotos!
                        </p>
                        <div id="memoStatusMessage" class="text-center text-2xl font-semibold text-gray-800 mb-6 h-8">
                            Intentos: 0
                        </div>
                        <div id="memo-board" class="grid grid-cols-4 gap-2 sm:gap-4 max-w-lg mx-auto">
                            <!-- Las cartas se generar√°n aqu√≠ con JavaScript -->
                        </div>
                        <div class="text-center mt-8">
                            <button id="memoResetButton" class="bg-rose-500 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition-all duration-300 hover:bg-rose-700 hover:shadow-xl active:scale-95">
                                Reiniciar Juego
                            </button>
                        </div>
                    </div>

                    <!-- --- Juego 3: Sopa de Letras --- -->
                    <div id="game-sopa-letras" class="game-content hidden">
                        <p class="text-lg text-center text-gray-700 mb-4">
                            Encuentra las palabras de nuestra historia.
                        </p>
                        <!-- Nuevo: Mensaje de estado para la sopa -->
                        <div id="sopaStatus" class="text-center text-2xl font-bold text-rose-600 mb-4 h-8 min-h-[2rem]"></div>
                        
                        <div class="flex flex-col lg:flex-row gap-8 justify-center items-center">
                            <!-- Lista de Palabras -->
                            <div class="p-6 bg-rose-50 rounded-lg shadow-inner">
                                <h3 class="font-heading text-2xl text-rose-600 mb-4">Palabras a encontrar:</h3>
                                <ul id="sopa-word-list" class="space-y-2">
                                    <!-- Se generar√° con JS -->
                                </ul>
                            </div>
                            <!-- Tablero de Sopa -->
                            <div id="sopa-board" class="grid grid-cols-10 gap-1 p-2 bg-white border-2 border-rose-200 rounded-lg shadow-md w-max">
                                <!-- Se generar√° con JS -->
                            </div>
                        </div>
                        <div class="text-center mt-8 space-x-4">
                            <button id="sopaClearButton" class="bg-gray-400 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition-all duration-300 hover:bg-gray-500 active:scale-95">
                                Limpiar Selecci√≥n
                            </button>
                            <button id="sopaCheckButton" class="bg-rose-500 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition-all duration-300 hover:bg-rose-700 hover:shadow-xl active:scale-95">
                                Comprobar Palabra
                            </button>
                        </div>
                    </div>

                    <!-- --- Juego 4: Ahorcado --- -->
                    <div id="game-ahorcado" class="game-content hidden">
                        <p class="text-lg text-center text-gray-700 mb-4">
                            ¬°Adivina la palabra secreta!
                        </p>
                        <div id="ahorcadoDisplay" class="flex justify-center gap-2 sm:gap-4 mb-8">
                            <!-- Letras de la palabra a adivinar -->
                        </div>
                        <div id="ahorcadoStatus" class="text-center text-5xl mb-6 h-16">
                            <!-- Vidas restantes (emoji) -->
                        </div>
                        <div id="ahorcadoKeyboard" class="max-w-lg mx-auto flex flex-wrap justify-center gap-2">
                            <!-- Teclado se genera con JS -->
                        </div>
                        <div class="text-center mt-8">
                            <button id="ahorcadoResetButton" class="bg-rose-500 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition-all duration-300 hover:bg-rose-700 hover:shadow-xl active:scale-95">
                                Reiniciar Juego
                            </button>
                        </div>
                    </div>

                    <!-- --- Juego 5: Unidos por la Eternidad --- -->
                    <div id="game-unidos" class="game-content hidden">
                        <p class="text-lg text-center text-gray-700 mb-4">
                            Ayuda al novio a llegar con la novia. ¬°Evita los obst√°culos!
                        </p>
                        <p class="text-center text-gray-500 mb-4">
                            Usa las <strong>Flechas</strong> o los <strong>Botones</strong> para moverte.
                        </p>
                        
                        <div id="unidosStatus" class="text-center text-3xl font-bold text-rose-600 mb-4 h-10">
                            <!-- Mensaje de victoria -->
                        </div>

                        <canvas id="unidosCanvas" width="700" height="500" class="mx-auto">
                            Tu navegador no soporta canvas.
                        </canvas>

                        <!-- CONTROLES T√ÅCTILES PARA UNIDOS -->
                        <div class="touch-controls">
                            <div class="d-pad">
                                <!-- Usamos eventos Touch y Mouse para compatibilidad -->
                                <button class="d-btn btn-up" 
                                    onmousedown="setUnidosKey('ArrowUp', true)" onmouseup="setUnidosKey('ArrowUp', false)" onmouseleave="setUnidosKey('ArrowUp', false)"
                                    ontouchstart="event.preventDefault(); setUnidosKey('ArrowUp', true)" ontouchend="event.preventDefault(); setUnidosKey('ArrowUp', false)">
                                    <i class="fas fa-arrow-up"></i>
                                </button>
                                <button class="d-btn btn-left" 
                                    onmousedown="setUnidosKey('ArrowLeft', true)" onmouseup="setUnidosKey('ArrowLeft', false)" onmouseleave="setUnidosKey('ArrowLeft', false)"
                                    ontouchstart="event.preventDefault(); setUnidosKey('ArrowLeft', true)" ontouchend="event.preventDefault(); setUnidosKey('ArrowLeft', false)">
                                    <i class="fas fa-arrow-left"></i>
                                </button>
                                <button class="d-btn btn-down" 
                                    onmousedown="setUnidosKey('ArrowDown', true)" onmouseup="setUnidosKey('ArrowDown', false)" onmouseleave="setUnidosKey('ArrowDown', false)"
                                    ontouchstart="event.preventDefault(); setUnidosKey('ArrowDown', true)" ontouchend="event.preventDefault(); setUnidosKey('ArrowDown', false)">
                                    <i class="fas fa-arrow-down"></i>
                                </button>
                                <button class="d-btn btn-right" 
                                    onmousedown="setUnidosKey('ArrowRight', true)" onmouseup="setUnidosKey('ArrowRight', false)" onmouseleave="setUnidosKey('ArrowRight', false)"
                                    ontouchstart="event.preventDefault(); setUnidosKey('ArrowRight', true)" ontouchend="event.preventDefault(); setUnidosKey('ArrowRight', false)">
                                    <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- --- Juego 6: B√©isbol --- -->
                    <div id="game-baseball" class="game-content hidden">
                        <p class="text-lg text-center text-gray-700 mb-2">
                            ¬°El Gran Juego! Batea la bola antes de que sea Strike.
                        </p>
                        <p class="text-sm text-center text-gray-500 mb-4">
                            Haz <strong>Click</strong> o toca la pantalla para batear. ¬°Tienes 3 Vidas (Pelotas)!
                        </p>

                        <!-- Marcador -->
                        <div class="flex justify-center gap-8 mb-4 font-heading text-xl font-bold text-gray-800">
                            <div class="bg-white px-4 py-2 rounded-lg shadow border border-gray-200">
                                Carreras: <span id="bb-score" class="text-rose-600 text-2xl">0</span>
                            </div>
                            <div class="bg-white px-4 py-2 rounded-lg shadow border border-gray-200">
                                Vidas: <span id="bb-lives" class="text-red-500 text-2xl">‚öæ‚öæ‚öæ</span>
                            </div>
                        </div>
                        
                        <!-- Mensaje de estado del juego -->
                        <div id="bb-message" class="text-center h-8 mb-2 text-xl font-bold text-rose-600 animate-pulse">
                            ¬°Prep√°rate para batear!
                        </div>

                        <!-- Canvas del juego -->
                        <div class="flex justify-center">
                            <canvas id="baseballCanvas" width="400" height="500" class="shadow-xl"></canvas>
                        </div>

                        <div class="text-center mt-6">
                            <button id="baseballResetBtn" class="bg-rose-500 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition-all duration-300 hover:bg-rose-700 hover:shadow-xl active:scale-95">
                                Nuevo Juego
                            </button>
                        </div>
                    </div>

                    <!-- --- Juego 7: F√∫tbol (NUEVO) --- -->
                    <div id="game-soccer" class="game-content hidden">
                        <p class="text-lg text-center text-gray-700 mb-2">
                            ¬°F√∫tbol 1 vs 1! El primero en 5 goles gana.
                        </p>
                        
                        <!-- Configuraci√≥n de Nombres -->
                        <div id="soccer-setup" class="flex flex-col items-center gap-4 mb-6 p-6 bg-rose-50 rounded-xl border border-rose-100 shadow-sm">
                            <h3 class="font-heading text-xl text-rose-600">¬°Alineaci√≥n Inicial!</h3>
                            <div class="flex flex-col sm:flex-row gap-4 w-full max-w-md">
                                <div class="flex-1">
                                    <label class="block text-xs font-bold text-rose-500 mb-1 ml-1">Jugador 1</label>
                                    <input type="text" id="p1NameInput" placeholder="Tu nombre..." class="w-full border-2 border-rose-200 rounded-lg px-3 py-2 text-center focus:outline-none focus:border-rose-500 text-gray-700 font-bold" value="Jugador 1">
                                </div>
                                <div class="flex-1">
                                    <label class="block text-xs font-bold text-blue-500 mb-1 ml-1">Jugador 2</label>
                                    <input type="text" id="p2NameInput" placeholder="Su nombre..." class="w-full border-2 border-blue-200 rounded-lg px-3 py-2 text-center focus:outline-none focus:border-blue-500 text-gray-700 font-bold" value="Jugador 2">
                                </div>
                            </div>
                            <button id="soccerStartBtn" class="bg-rose-500 text-white font-bold py-2 px-8 rounded-full shadow hover:bg-rose-600 transition mt-2 active:scale-95">
                                ¬°Comenzar Partido! ‚öΩ
                            </button>
                        </div>

                        <!-- √Årea de Juego (Oculta al inicio) -->
                        <div id="soccer-game-area" class="hidden">
                            <div class="flex justify-center gap-8 text-sm text-gray-500 mb-4">
                                <div class="flex items-center gap-2">
                                    <span class="w-4 h-4 rounded-full bg-rose-500 block"></span>
                                    <span class="hidden sm:inline">Controles:</span> <strong>W / S</strong>
                                </div>
                                <div class="flex items-center gap-2">
                                    <span class="w-4 h-4 rounded-full bg-blue-500 block"></span>
                                    <span class="hidden sm:inline">Controles:</span> <strong>Flechas</strong>
                                </div>
                            </div>

                            <!-- Marcador con Nombres -->
                            <div class="flex justify-center gap-8 sm:gap-16 mb-6">
                                <div class="text-center">
                                    <div id="soccer-name-1" class="text-rose-600 font-bold text-sm sm:text-base uppercase tracking-wider mb-1">JUGADOR 1</div>
                                    <div class="font-heading text-4xl sm:text-5xl font-bold text-gray-800 bg-white px-4 py-1 rounded-lg shadow-sm border border-rose-100">
                                        <span id="soccer-score-1" class="text-rose-500">0</span>
                                    </div>
                                </div>
                                <div class="flex items-center pt-6 text-gray-300 font-heading text-2xl">VS</div>
                                <div class="text-center">
                                    <div id="soccer-name-2" class="text-blue-600 font-bold text-sm sm:text-base uppercase tracking-wider mb-1">JUGADOR 2</div>
                                    <div class="font-heading text-4xl sm:text-5xl font-bold text-gray-800 bg-white px-4 py-1 rounded-lg shadow-sm border border-blue-100">
                                        <span id="soccer-score-2" class="text-blue-500">0</span>
                                    </div>
                                </div>
                            </div>

                            <div id="soccer-message" class="text-center h-8 mb-2 text-xl font-bold text-green-600 animate-bounce"></div>

                            <!-- Canvas -->
                            <div class="flex justify-center">
                                <canvas id="soccerCanvas" width="600" height="400" class="shadow-xl cursor-none"></canvas>
                            </div>

                            <!-- CONTROLES T√ÅCTILES PARA F√öTBOL (2 JUGADORES) -->
                            <div class="touch-controls justify-between w-full max-w-2xl mx-auto px-4">
                                <!-- Controles Jugador 1 (Rosa) - Simula WASD -->
                                <div class="d-pad">
                                    <button class="d-btn p1 btn-up" 
                                        onmousedown="setSoccerKey('KeyW', true)" onmouseup="setSoccerKey('KeyW', false)" onmouseleave="setSoccerKey('KeyW', false)"
                                        ontouchstart="event.preventDefault(); setSoccerKey('KeyW', true)" ontouchend="event.preventDefault(); setSoccerKey('KeyW', false)">
                                        <i class="fas fa-arrow-up"></i>
                                    </button>
                                    
                                    <button class="d-btn p1 btn-left" 
                                        onmousedown="setSoccerKey('KeyA', true)" onmouseup="setSoccerKey('KeyA', false)" onmouseleave="setSoccerKey('KeyA', false)"
                                        ontouchstart="event.preventDefault(); setSoccerKey('KeyA', true)" ontouchend="event.preventDefault(); setSoccerKey('KeyA', false)">
                                        <i class="fas fa-arrow-left"></i>
                                    </button>
                                    
                                    <button class="d-btn p1 btn-down" 
                                        onmousedown="setSoccerKey('KeyS', true)" onmouseup="setSoccerKey('KeyS', false)" onmouseleave="setSoccerKey('KeyS', false)"
                                        ontouchstart="event.preventDefault(); setSoccerKey('KeyS', true)" ontouchend="event.preventDefault(); setSoccerKey('KeyS', false)">
                                        <i class="fas fa-arrow-down"></i>
                                    </button>
                                    
                                    <button class="d-btn p1 btn-right" 
                                        onmousedown="setSoccerKey('KeyD', true)" onmouseup="setSoccerKey('KeyD', false)" onmouseleave="setSoccerKey('KeyD', false)"
                                        ontouchstart="event.preventDefault(); setSoccerKey('KeyD', true)" ontouchend="event.preventDefault(); setSoccerKey('KeyD', false)">
                                        <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>

                                <!-- Texto VS peque√±o en m√≥vil -->
                                <div class="flex items-center text-gray-300 font-bold text-xl">VS</div>

                                <!-- Controles Jugador 2 (Azul) - Simula Flechas -->
                                <div class="d-pad">
                                    <button class="d-btn p2 btn-up" 
                                        onmousedown="setSoccerKey('ArrowUp', true)" onmouseup="setSoccerKey('ArrowUp', false)" onmouseleave="setSoccerKey('ArrowUp', false)"
                                        ontouchstart="event.preventDefault(); setSoccerKey('ArrowUp', true)" ontouchend="event.preventDefault(); setSoccerKey('ArrowUp', false)">
                                        <i class="fas fa-arrow-up"></i>
                                    </button>
                                    
                                    <button class="d-btn p2 btn-left" 
                                        onmousedown="setSoccerKey('ArrowLeft', true)" onmouseup="setSoccerKey('ArrowLeft', false)" onmouseleave="setSoccerKey('ArrowLeft', false)"
                                        ontouchstart="event.preventDefault(); setSoccerKey('ArrowLeft', true)" ontouchend="event.preventDefault(); setSoccerKey('ArrowLeft', false)">
                                        <i class="fas fa-arrow-left"></i>
                                    </button>
                                    
                                    <button class="d-btn p2 btn-down" 
                                        onmousedown="setSoccerKey('ArrowDown', true)" onmouseup="setSoccerKey('ArrowDown', false)" onmouseleave="setSoccerKey('ArrowDown', false)"
                                        ontouchstart="event.preventDefault(); setSoccerKey('ArrowDown', true)" ontouchend="event.preventDefault(); setSoccerKey('ArrowDown', false)">
                                        <i class="fas fa-arrow-down"></i>
                                    </button>
                                    
                                    <button class="d-btn p2 btn-right" 
                                        onmousedown="setSoccerKey('ArrowRight', true)" onmouseup="setSoccerKey('ArrowRight', false)" onmouseleave="setSoccerKey('ArrowRight', false)"
                                        ontouchstart="event.preventDefault(); setSoccerKey('ArrowRight', true)" ontouchend="event.preventDefault(); setSoccerKey('ArrowRight', false)">
                                        <i class="fas fa-arrow-right"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="text-center mt-6">
                                <button id="soccerResetBtn" class="bg-gray-500 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition-all duration-300 hover:bg-gray-600 active:scale-95">
                                    Cambiar Nombres / Reiniciar
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="bg-rose-50 text-center py-12 mt-20">
        <p class="text-lg text-gray-700">
            Hecho con todo mi amor para ti,
        </p>
        <p class="font-script text-6xl text-rose-600 mt-2">
            Yaremi Arlette
        </p>
    </footer>

    <!-- JavaScript (TODA LA L√ìGICA) -->
    <script>
        // --- L√ìGICA DE LOGOUT (SALIR) ---
        const logoutButton = document.getElementById('logout-button');
        if (logoutButton) {
            logoutButton.addEventListener('click', () => {
                window.location.href = 'index.html';
            });
        }

        // --- L√ìGICA DE NAVEGACI√ìN DE JUEGOS (Sub-men√∫) ---
        document.addEventListener('DOMContentLoaded', () => {
            const gameNavLinks = document.querySelectorAll('.game-nav-link');
            const gameContents = document.querySelectorAll('.game-content');
            
            // Inicializar todos los juegos
            initTicTacToe();
            initMemorama();
            initSopaLetras();
            initAhorcado();
            initUnidos(); 
            initBaseball(); 
            initSoccer(); // Nuevo

            gameNavLinks.forEach(link => {
                link.addEventListener('click', () => {
                    const targetGameId = link.dataset.game;

                    // Ocultar todos los juegos
                    gameContents.forEach(game => game.classList.add('hidden'));
                    
                    // Quitar clase activa de todos los links del submen√∫
                    gameNavLinks.forEach(nav => nav.classList.remove('active-game'));

                    // Mostrar el juego seleccionado
                    const targetGame = document.getElementById(`game-${targetGameId}`);
                    if (targetGame) {
                        targetGame.classList.remove('hidden');
                    }
                    
                    // A√±adir clase activa al link seleccionado
                    link.classList.add('active-game');
                });
            });
        });

        // --- HELPER FUNCTIONS PARA CONTROLES T√ÅCTILES ---
        // Estas funciones se llaman desde el HTML (ontouchstart/end)
        window.setUnidosKey = function(key, state) {
            if(unidosKeys.hasOwnProperty(key)) {
                unidosKeys[key] = state;
            }
        };
        
        window.setSoccerKey = function(key, state) {
            scKeys[key] = state;
        };

        // ======================================================
        // --- JUEGO 1: TRES EN RAYA (TIC-TAC-TOE) ---
        // ======================================================
        let tttStatusMessage, tttResetButton, tttCells;
        let tttCurrentPlayer = 'X';
        let tttGameActive = true;
        let tttGameState = ["", "", "", "", "", "", "", "", ""];
        const tttWinningConditions = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8],
            [0, 3, 6], [1, 4, 7], [2, 5, 8],
            [0, 4, 8], [2, 4, 6]
        ];

        const tttWinningMessage = () => `¬°El jugador ${tttCurrentPlayer} ha ganado! üéâ`;
        const tttDrawMessage = () => `¬°Juego Empatado! ü§ù`;
        const tttCurrentPlayerTurn = () => `Turno del jugador ${tttCurrentPlayer}`;

        function initTicTacToe() {
            tttStatusMessage = document.getElementById('tttStatusMessage');
            tttResetButton = document.getElementById('tttResetButton');
            tttCells = document.querySelectorAll('.ttt-cell');

            tttCells.forEach(cell => cell.addEventListener('click', handleTttCellClick));
            tttResetButton.addEventListener('click', resetTicTacToe);
            resetTicTacToe();
        }

        function handleTttCellClick(e) {
            const clickedCell = e.target;
            const clickedCellIndex = parseInt(clickedCell.getAttribute('data-cell-index'));

            if (tttGameState[clickedCellIndex] !== "" || !tttGameActive) {
                return;
            }

            handleTttCellPlayed(clickedCell, clickedCellIndex);
            handleTttResultValidation();
        }

        function handleTttCellPlayed(clickedCell, clickedCellIndex) {
            tttGameState[clickedCellIndex] = tttCurrentPlayer;
            clickedCell.innerHTML = tttCurrentPlayer;
            if (tttCurrentPlayer === 'X') {
                clickedCell.classList.add('text-rose-600');
            } else {
                clickedCell.classList.add('text-pink-500');
            }
        }

        function handleTttResultValidation() {
            let roundWon = false;
            for (let i = 0; i < tttWinningConditions.length; i++) {
                const winCondition = tttWinningConditions[i];
                let a = tttGameState[winCondition[0]];
                let b = tttGameState[winCondition[1]];
                let c = tttGameState[winCondition[2]];
                if (a === '' || b === '' || c === '') continue;
                if (a === b && b === c) {
                    roundWon = true;
                    break;
                }
            }

            if (roundWon) {
                tttStatusMessage.innerHTML = tttWinningMessage();
                tttGameActive = false;
                return;
            }

            let roundDraw = !tttGameState.includes("");
            if (roundDraw) {
                tttStatusMessage.innerHTML = tttDrawMessage();
                tttGameActive = false;
                return;
            }

            handleTttPlayerChange();
        }

        function handleTttPlayerChange() {
            tttCurrentPlayer = tttCurrentPlayer === "X" ? "O" : "X";
            tttStatusMessage.innerHTML = tttCurrentPlayerTurn();
        }

        function resetTicTacToe() {
            tttGameActive = true;
            tttCurrentPlayer = "X";
            tttGameState = ["", "", "", "", "", "", "", "", ""];
            if (tttStatusMessage) tttStatusMessage.innerHTML = tttCurrentPlayerTurn();
            if (tttCells) {
                tttCells.forEach(cell => {
                    cell.innerHTML = "";
                    cell.classList.remove('text-rose-600', 'text-pink-500');
                });
            }
        }

        // ======================================================
        // --- JUEGO 2: MEMORAMA (CORREGIDO) ---
        // ======================================================
        let memoBoard, memoStatusMessage, memoResetButton;
        
        let memoCardsData = [
            { id: 1, img: 'imagenes/1.jpeg' },
            { id: 1, img: 'imagenes/1.jpeg' }, 
            { id: 2, img: 'imagenes/2.jpeg' },
            { id: 2, img: 'imagenes/2.jpeg' }, 
            { id: 3, img: 'imagenes/3.jpeg' },
            { id: 3, img: 'imagenes/3.jpeg' }, 
            { id: 4, img: 'imagenes/4.jpeg' }, 
            { id: 4, img: 'imagenes/4.jpeg' }, 
            { id: 5, img: 'imagenes/5.jpeg' }, 
            { id: 5, img: 'imagenes/5.jpeg' }, 
            { id: 6, img: 'imagenes/6.jpeg' }, 
            { id: 6, img: 'imagenes/6.jpeg' }, 
        ];
        
        let memoFlippedCards = [];
        let memoLockBoard = false;
        let memoAttempts = 0;
        let memoPairsFound = 0;

        function initMemorama() {
            memoBoard = document.getElementById('memo-board');
            memoStatusMessage = document.getElementById('memoStatusMessage');
            memoResetButton = document.getElementById('memoResetButton');
            memoResetButton.addEventListener('click', resetMemorama);
            resetMemorama();
        }

        function createMemoBoard() {
            memoBoard.innerHTML = '';
            memoPairsFound = 0;
            memoAttempts = 0;
            memoStatusMessage.innerHTML = `Intentos: 0`;
            
            memoCardsData.sort(() => 0.5 - Math.random());

            memoCardsData.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.classList.add('memo-card', 'h-24', 'w-full', 'cursor-pointer');
                cardElement.dataset.id = card.id;
                cardElement.dataset.index = index; 

                const imgSrc = card.img;
                const imgFallback = `https://placehold.co/150x150/fbcfe8/e11d48?text=Foto+${card.id}`;

                cardElement.innerHTML = `
                    <div class="memo-card-inner">
                        <div class="memo-card-front">üíñ</div>
                        <div class="memo-card-back">
                            <img src="${imgSrc}" alt="Recuerdo" onerror="this.src='${imgFallback}'">
                        </div>
                    </div>
                `;
                cardElement.addEventListener('click', handleMemoFlip);
                memoBoard.appendChild(cardElement);
            });
        }

        function handleMemoFlip() {
            if (memoLockBoard) return;
            if (this.classList.contains('is-flipped')) return; 

            this.classList.add('is-flipped');
            memoFlippedCards.push(this);

            if (memoFlippedCards.length === 2) {
                memoLockBoard = true;
                memoAttempts++;
                memoStatusMessage.innerHTML = `Intentos: ${memoAttempts}`;
                checkForMemoMatch();
            }
        }

        function checkForMemoMatch() {
            const [card1, card2] = memoFlippedCards;
            const isMatch = card1.dataset.id === card2.dataset.id && card1.dataset.index !== card2.dataset.index;

            if (isMatch) {
                memoPairsFound++;
                disableMemoCards();
                if (memoPairsFound === memoCardsData.length / 2) {
                    memoStatusMessage.innerHTML = `¬°Ganaste en ${memoAttempts} intentos! üéâ`;
                }
            } else {
                unflipMemoCards();
            }
        }

        function disableMemoCards() {
            memoFlippedCards.forEach(card => {
                card.removeEventListener('click', handleMemoFlip);
                card.querySelector('.memo-card-back').classList.add('memo-matched');
            });
            resetMemoTurn();
        }

        function unflipMemoCards() {
            setTimeout(() => {
                memoFlippedCards.forEach(card => card.classList.remove('is-flipped'));
                resetMemoTurn();
            }, 1200);
        }

        function resetMemoTurn() {
            memoFlippedCards = [];
            memoLockBoard = false;
        }

        function resetMemorama() {
            createMemoBoard();
        }

        // ======================================================
        // --- JUEGO 3: SOPA DE LETRAS ---
        // ======================================================
        let sopaBoard, sopaWordList, sopaCheckButton, sopaClearButton, sopaStatus;
        const sopaWords = ['PAPOI', 'TINKYWINKY', 'EAMO', 'GUAPITO', 'AHAHAH', 'VIEJOFEO', 'OSEA'];
        let sopaWordsFound = [];
        let sopaCurrentSelection = []; 
        const sopaGridSize = 10;
        const sopaGrid = [
            ['A', 'A', 'H', 'A', 'H', 'A', 'H', 'M', 'N', 'T'],
            ['B', 'H', 'J', 'U', 'N', 'T', 'O', 'E', 'P', 'I'],
            ['R', 'O', 'S', 'E', 'A', 'V', 'W', 'A', 'O', 'N'],
            ['G', 'U', 'A', 'P', 'I', 'T', 'O', 'M', 'D', 'K'],
            ['S', 'H', 'Y', 'X', 'M', 'O', 'E', 'O', 'G', 'Y'],
            ['I', 'J', 'R', 'L', 'M', 'Z', 'O', 'P', 'Q', 'W'],
            ['V', 'I', 'E', 'J', 'O', 'F', 'E', 'O', 'Z', 'I'],
            ['P', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'N'],
            ['R', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'K'],
            ['A', 'P', 'A', 'P', 'O', 'I', 'U', 'V', 'W', 'Y']
        ];
        
        function initSopaLetras() {
            sopaBoard = document.getElementById('sopa-board');
            sopaWordList = document.getElementById('sopa-word-list');
            sopaCheckButton = document.getElementById('sopaCheckButton');
            sopaClearButton = document.getElementById('sopaClearButton');
            sopaStatus = document.getElementById('sopaStatus'); 

            sopaCheckButton.addEventListener('click', checkSopaWord);
            sopaClearButton.addEventListener('click', clearSopaSelection);
            
            resetSopaLetras();
        }
        
        function createSopaBoard() {
            sopaBoard.innerHTML = '';
            sopaCurrentSelection = [];
            
            for (let r = 0; r < sopaGridSize; r++) {
                for (let c = 0; c < sopaGridSize; c++) {
                    const cell = document.createElement('div');
                    cell.classList.add('sopa-cell', 'w-8', 'h-8', 'sm:w-10', 'sm:h-10', 'flex', 'items-center', 'justify-center', 'text-lg', 'font-bold', 'cursor-pointer', 'select-none');
                    cell.dataset.r = r;
                    cell.dataset.c = c;
                    cell.textContent = sopaGrid[r][c];
                    cell.addEventListener('click', () => handleSopaCellClick(cell));
                    sopaBoard.appendChild(cell);
                }
            }
        }
        
        function updateSopaWordList() {
            sopaWordList.innerHTML = '';
            sopaWords.forEach(word => {
                const li = document.createElement('li');
                li.textContent = word;
                li.classList.add('sopa-word', 'text-lg', 'font-medium', 'text-gray-700');
                if (sopaWordsFound.includes(word)) {
                    li.classList.add('found');
                }
                sopaWordList.appendChild(li);
            });
        }
        
        function handleSopaCellClick(cell) {
            if (cell.classList.contains('selected')) {
                cell.classList.remove('selected');
                sopaCurrentSelection = sopaCurrentSelection.filter(sel => sel.cell !== cell);
            } else {
                cell.classList.add('selected');
                sopaCurrentSelection.push({ cell, letter: cell.textContent });
            }
        }
        
        function clearSopaSelection() {
            sopaCurrentSelection.forEach(sel => sel.cell.classList.remove('selected'));
            sopaCurrentSelection = [];
        }
        
        function checkSopaWord() {
            const selectedWord = sopaCurrentSelection.map(sel => sel.letter).join('');
            
            if (sopaWords.includes(selectedWord) && !sopaWordsFound.includes(selectedWord)) {
                sopaWordsFound.push(selectedWord);
                sopaCurrentSelection.forEach(sel => {
                    sel.cell.classList.add('bg-green-200', 'text-green-800');
                    sel.cell.classList.remove('selected');
                });
                updateSopaWordList();
                clearSopaSelection();
                triggerSopaCelebration();
                
                if (sopaWordsFound.length === sopaWords.length) {
                    if (sopaStatus) {
                        sopaStatus.innerHTML = "¬°Felicidades! üíñ Has encontrado todas las palabras";
                    }
                    setTimeout(() => triggerSopaCelebration(), 500); 
                }
            } else {
                sopaCurrentSelection.forEach(sel => {
                    sel.cell.classList.add('bg-red-200');
                });
                setTimeout(() => {
                    sopaCurrentSelection.forEach(sel => sel.cell.classList.remove('bg-red-200'));
                    clearSopaSelection();
                }, 500);
            }
        }

        function resetSopaLetras() {
            sopaWordsFound = [];
            if(sopaStatus) sopaStatus.innerHTML = ""; 
            createSopaBoard();
            updateSopaWordList();
        }

        function triggerSopaCelebration() {
            for(let i = 0; i < 30; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart-particle');
                heart.innerHTML = 'üíñ';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.top = (window.innerHeight - 50) + 'px';
                const randomX = (Math.random() - 0.5) * 400; 
                heart.style.setProperty('--random-x', randomX + 'px');
                const randomScale = Math.random() * 0.5 + 0.5;
                heart.style.transform = `scale(${randomScale})`;
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 4000);
            }
        }

        // ======================================================
        // --- JUEGO 4: AHORCADO ---
        // ======================================================
        let ahorcadoWord = "ERES EL AMOR DE MI VIDA"; 
        let ahorcadoGuessedWord, ahorcadoWrongGuesses, ahorcadoGameActive;
        let ahorcadoDisplay, ahorcadoStatus, ahorcadoKeyboard, ahorcadoResetButton;
        const ahorcadoVidasEmojis = ['üòä', 'üòü', 'üò•', 'üò®', 'üò±', 'üòµ'];
        
        function initAhorcado() {
            ahorcadoDisplay = document.getElementById('ahorcadoDisplay');
            ahorcadoStatus = document.getElementById('ahorcadoStatus');
            ahorcadoKeyboard = document.getElementById('ahorcadoKeyboard');
            ahorcadoResetButton = document.getElementById('ahorcadoResetButton');

            createAhorcadoKeyboard();
            ahorcadoResetButton.addEventListener('click', resetAhorcado);
            resetAhorcado();
        }
        
        function resetAhorcado() {
            ahorcadoGuessedWord = Array(ahorcadoWord.length).fill('_');
            ahorcadoWrongGuesses = 0;
            ahorcadoGameActive = true;
            
            updateAhorcadoDisplay();
            ahorcadoStatus.innerHTML = ahorcadoVidasEmojis[ahorcadoWrongGuesses];
            document.querySelectorAll('.keyboard-key').forEach(key => key.disabled = false);
        }
        
        function createAhorcadoKeyboard() {
            ahorcadoKeyboard.innerHTML = '';
            'ABCDEFGHIJKLMN√ëOPQRSTUVWXYZ'.split('').forEach(letter => {
                const key = document.createElement('button');
                key.textContent = letter;
                key.classList.add('keyboard-key', 'w-10', 'h-10', 'sm:w-12', 'sm:h-12', 'bg-rose-100', 'border-2', 'border-rose-200', 'rounded-lg', 'font-bold', 'text-gray-700', 'hover:bg-rose-200', 'active:scale-95');
                key.addEventListener('click', () => handleAhorcadoGuess(letter));
                ahorcadoKeyboard.appendChild(key);
            });
        }
        
        function updateAhorcadoDisplay() {
            ahorcadoDisplay.innerHTML = '';
            ahorcadoGuessedWord.forEach(letter => {
                const letterEl = document.createElement('div');
                letterEl.classList.add('ahorcado-letter', 'text-4xl', 'font-bold', 'flex', 'items-center', 'justify-center', 'text-rose-700');
                if (letter !== '_') {
                    letterEl.textContent = letter;
                    letterEl.classList.add('filled');
                }
                ahorcadoDisplay.appendChild(letterEl);
            });
        }

        function handleAhorcadoGuess(letter) {
            if (!ahorcadoGameActive) return;

            const key = Array.from(ahorcadoKeyboard.children).find(k => k.textContent === letter);
            if (key) key.disabled = true;

            if (ahorcadoWord.includes(letter)) {
                for (let i = 0; i < ahorcadoWord.length; i++) {
                    if (ahorcadoWord[i] === letter) {
                        ahorcadoGuessedWord[i] = letter;
                    }
                }
            } else {
                ahorcadoWrongGuesses++;
            }
            
            updateAhorcadoDisplay();
            checkAhorcadoGameStatus();
        }
        
        function checkAhorcadoGameStatus() {
            ahorcadoStatus.innerHTML = ahorcadoVidasEmojis[ahorcadoWrongGuesses];

            if (!ahorcadoGuessedWord.includes('_')) {
                ahorcadoStatus.innerHTML = '¬°Ganaste! üíñ';
                ahorcadoGameActive = false;
            } else if (ahorcadoWrongGuesses >= ahorcadoVidasEmojis.length - 1) {
                ahorcadoStatus.innerHTML = 'üòµ ¬°Oh no! La palabra era: ' + ahorcadoWord;
                ahorcadoGameActive = false;
            }
        }

        // ======================================================
        // --- JUEGO 5: UNIDOS POR LA ETERNIDAD ---
        // ======================================================
        let unidosCanvas, unidosCtx, unidosStatus;
        let unidosPlayer, unidosTarget, unidosObstacles, unidosKeys, unidosGameWon;
        let gameUnidosContainer; 

        let playerW = 60; 
        let playerH = 70; 
        let targetW = 50; 
        let targetH = 60; 
        
        let unidosPlayerImg = new Image();
        unidosPlayerImg.src = 'imagenes/Novio.png'; 
        let unidosTargetImg = new Image();
        unidosTargetImg.src = 'imagenes/Novia.png'; 
        let unidosWinImg = new Image();
        unidosWinImg.src = 'imagenes/Novios.png'; 
        
        let imagesLoaded = 0;
        const totalImages = 3;

        unidosPlayerImg.onload = () => { imagesLoaded++; };
        unidosTargetImg.onload = () => { imagesLoaded++; };
        unidosWinImg.onload = () => { imagesLoaded++; };

        unidosPlayerImg.onerror = () => { console.log('Imagen Novio no encontrada'); };
        unidosTargetImg.onerror = () => { console.log('Imagen Novia no encontrada'); };

        function initUnidos() {
            unidosCanvas = document.getElementById('unidosCanvas');
            unidosCtx = unidosCanvas.getContext('2d');
            unidosStatus = document.getElementById('unidosStatus');
            gameUnidosContainer = document.getElementById('game-unidos'); 
            
            unidosKeys = {
                ArrowUp: false,
                ArrowDown: false,
                ArrowLeft: false,
                ArrowRight: false
            };
            
            resetUnidos(); 

            window.addEventListener('keydown', handleUnidosKeyDown);
            window.addEventListener('keyup', handleUnidosKeyUp);
            
            unidosGameLoop();
        }

        function handleUnidosKeyDown(e) {
            if (!gameUnidosContainer || gameUnidosContainer.classList.contains('hidden')) return;
            if (unidosKeys.hasOwnProperty(e.key)) {
                unidosKeys[e.key] = true;
                if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
                    e.preventDefault();
                }
            }
        }

        function handleUnidosKeyUp(e) {
            if (unidosKeys.hasOwnProperty(e.key)) {
                unidosKeys[e.key] = false;
            }
        }

        function resetUnidos() {
            unidosPlayer = { x: 30, y: unidosCanvas.height / 2 - playerH / 2, width: playerW, height: playerH, speed: 4 };
            unidosTarget = { x: unidosCanvas.width - targetW - 30, y: unidosCanvas.height / 2 - targetH / 2, width: targetW, height: targetH };
            
            unidosObstacles = [
                { x: 100, y: 0, width: 20, height: 150 },
                { x: 100, y: 250, width: 20, height: 250 },
                { x: 200, y: 100, width: 20, height: 400 },
                { x: 300, y: 0, width: 20, height: 350 },
                { x: 300, y: 450, width: 20, height: 50 },
                { x: 400, y: 100, width: 20, height: 400 },
                { x: 500, y: 0, width: 20, height: 200 },
                { x: 500, y: 300, width: 20, height: 200 },
                { x: 600, y: 150, width: 20, height: 350 },
            ];
            unidosGameWon = false;
            unidosStatus.innerHTML = '';
        }

        function unidosGameLoop() {
            if (!unidosGameWon) {
                updateUnidos();
            }
            drawUnidos();
            requestAnimationFrame(unidosGameLoop);
        }

        function updateUnidos() {
            if (unidosKeys.ArrowUp && unidosPlayer.y > 0) unidosPlayer.y -= unidosPlayer.speed;
            if (unidosKeys.ArrowDown && unidosPlayer.y < unidosCanvas.height - unidosPlayer.height) unidosPlayer.y += unidosPlayer.speed;
            if (unidosKeys.ArrowLeft && unidosPlayer.x > 0) unidosPlayer.x -= unidosPlayer.speed;
            if (unidosKeys.ArrowRight && unidosPlayer.x < unidosCanvas.width - unidosPlayer.width) unidosPlayer.x += unidosPlayer.speed;
            
            unidosObstacles.forEach(obstacle => {
                if (checkCollision(unidosPlayer, obstacle)) {
                    unidosPlayer.x = 30;
                    unidosPlayer.y = unidosCanvas.height / 2 - unidosPlayer.height / 2;
                }
            });
            
            if (checkCollision(unidosPlayer, unidosTarget)) {
                unidosGameWon = true;
                unidosStatus.innerHTML = '¬°Unidos por la Eternidad! üíñ';
            }
        }
        
        function checkCollision(rect1, rect2) {
            return (
                rect1.x < rect2.x + rect2.width &&
                rect1.x + rect1.width > rect2.x &&
                rect1.y < rect2.y + rect2.height &&
                rect1.y + rect1.height > rect2.y
            );
        }

        function drawUnidos() {
            unidosCtx.clearRect(0, 0, unidosCanvas.width, unidosCanvas.height);
            
            unidosCtx.fillStyle = '#fecdd3'; 
            unidosObstacles.forEach(obstacle => {
                unidosCtx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            });

            if (imagesLoaded === totalImages) {
                unidosCtx.drawImage(unidosTargetImg, unidosTarget.x, unidosTarget.y, unidosTarget.width, unidosTarget.height);
                unidosCtx.drawImage(unidosPlayerImg, unidosPlayer.x, unidosPlayer.y, unidosPlayer.width, unidosPlayer.height);

                if (unidosGameWon) {
                    unidosCtx.clearRect(0, 0, unidosCanvas.width, unidosCanvas.height);
                    const winW = 200;
                    const winH = 150;
                    const winX = unidosCanvas.width / 2 - winW / 2;
                    const winY = unidosCanvas.height / 2 - winH / 2;

                    unidosCtx.drawImage(unidosWinImg, winX, winY, winW, winH);
                    
                    unidosCtx.font = '30px "Playfair Display", serif';
                    unidosCtx.textAlign = 'center';
                    unidosCtx.fillStyle = '#e11d48'; 
                    unidosCtx.fillText('¬°Felicidades!', unidosCanvas.width / 2, winY - 20);
                }
            } else {
                unidosCtx.fillStyle = '#be123c'; 
                unidosCtx.fillRect(unidosPlayer.x, unidosPlayer.y, unidosPlayer.width, unidosPlayer.height);
                unidosCtx.fillStyle = '#fb7185'; 
                unidosCtx.fillRect(unidosTarget.x, unidosTarget.y, unidosTarget.width, unidosTarget.height);
                
                if (unidosGameWon) {
                    unidosCtx.clearRect(0, 0, unidosCanvas.width, unidosCanvas.height);
                    unidosCtx.font = '50px sans-serif';
                    unidosCtx.textAlign = 'center';
                    unidosCtx.fillStyle = '#e11d48';
                    unidosCtx.fillText('‚ù§Ô∏è', unidosCanvas.width / 2, unidosCanvas.height / 2);
                    unidosCtx.font = '30px serif';
                    unidosCtx.fillText('¬°Felicidades!', unidosCanvas.width / 2, unidosCanvas.height / 2 + 40);
                }
            }
        }

        // ======================================================
        // --- JUEGO 6: B√âISBOL (NUEVO) ---
        // ======================================================
        let bbCanvas, bbCtx, bbMessage, bbScoreDisplay, bbLivesDisplay;
        let bbGameActive = false;
        let bbScore = 0;
        let bbLives = 3;
        let bbPitching = false; // ¬øLa bola est√° en el aire?
        let bbSwinging = false; // ¬øEl bate est√° golpeando?
        let bbSwingTimer = 0;
        let bbContainer;

        // Objetos del juego
        let bbBall = { x: 200, y: 100, radius: 8, speed: 0, color: 'white' };
        
        function initBaseball() {
            bbCanvas = document.getElementById('baseballCanvas');
            bbCtx = bbCanvas.getContext('2d');
            bbMessage = document.getElementById('bb-message');
            bbScoreDisplay = document.getElementById('bb-score');
            bbLivesDisplay = document.getElementById('bb-lives');
            bbContainer = document.getElementById('game-baseball');
            
            document.getElementById('baseballResetBtn').addEventListener('click', resetBaseball);
            
            // Eventos para batear
            bbCanvas.addEventListener('click', swingBat);
            bbCanvas.addEventListener('touchstart', (e) => { e.preventDefault(); swingBat(); });
            
            // Loop del juego
            requestAnimationFrame(bbGameLoop);
        }

        function resetBaseball() {
            bbGameActive = true;
            bbScore = 0;
            bbLives = 3;
            bbPitching = false;
            bbBall.y = 100; // Posici√≥n del pitcher
            bbBall.speed = 0;
            updateBaseballUI();
            bbMessage.textContent = "¬°Pitcher listo!";
            
            // Iniciar ciclo de lanzamientos
            setTimeout(startPitch, 1000);
        }

        function startPitch() {
            if (!bbGameActive || bbPitching) return;
            
            bbMessage.textContent = "¬°Ah√≠ viene la bola!";
            bbBall.x = 200; // Centro
            bbBall.y = 100; // Mont√≠culo
            // Velocidad aleatoria para sabor
            bbBall.speed = 3 + Math.random() * 4; 
            bbPitching = true;
        }

        function swingBat() {
            if (!bbGameActive) return;
            if (bbSwinging) return; // Ya est√° bateando

            bbSwinging = true;
            bbSwingTimer = 15; // Duraci√≥n del swing en frames
            
            // Checar colisi√≥n INMEDIATAMENTE al batear
            checkHit();
        }

        function checkHit() {
            if (!bbPitching) return; // No hay bola

            // Zona de bateo (y=400 a y=480 aproximadamente)
            const hitZoneY = 400;
            const hitZoneHeight = 80;
            
            if (bbBall.y > hitZoneY && bbBall.y < hitZoneY + hitZoneHeight) {
                // ¬°HIT!
                hitBall();
            } else {
                // Swing al aire (Strike por timing, pero el juego dice "si no le pegas pierdes")
                // Dejaremos que la bola pase para contar el out visualmente
            }
        }

        function hitBall() {
            bbPitching = false;
            
            // Calcular calidad del golpe
            const centerPlate = 440;
            const distance = Math.abs(bbBall.y - centerPlate);
            
            if (distance < 15) {
                // HOME RUN
                bbScore += 1; // Carreras
                bbMessage.textContent = "¬°¬°HOME RUN!! üåü";
                triggerBaseballConfetti();
            } else {
                // HIT SIMPLE
                // bbScore += 1; // Podemos sumar puntos por hits o solo Home Runs
                bbMessage.textContent = "¬°Bateaste! ¬°Foul Ball!"; // Sabor: un hit que no es HR
                // Para simplificar y dar puntos:
                // bbScore++; 
            }
            
            // Resetear bola
            bbBall.y = 100;
            updateBaseballUI();
            setTimeout(startPitch, 2000);
        }

        function missBall() {
            bbPitching = false;
            bbLives--;
            bbMessage.textContent = "¬°STRIKE! ‚ùå";
            updateBaseballUI();
            
            if (bbLives <= 0) {
                endBaseballGame();
            } else {
                setTimeout(startPitch, 2000);
            }
        }

        function endBaseballGame() {
            bbGameActive = false;
            bbMessage.textContent = `Juego Terminado. Score: ${bbScore}`;
        }

        function updateBaseballUI() {
            bbScoreDisplay.textContent = bbScore;
            let livesStr = "";
            for(let i=0; i<bbLives; i++) livesStr += "‚öæ";
            bbLivesDisplay.textContent = livesStr;
        }

        function bbGameLoop() {
            if (bbContainer && !bbContainer.classList.contains('hidden')) {
                updateBaseballPhysics();
                drawBaseballGame();
            }
            requestAnimationFrame(bbGameLoop);
        }

        function updateBaseballPhysics() {
            if (!bbGameActive) return;

            // Mover bola
            if (bbPitching) {
                bbBall.y += bbBall.speed;
                
                // Si la bola pasa al bateador (Strike/Out)
                if (bbBall.y > 500) {
                    missBall();
                }
            }

            // Timer del bate
            if (bbSwinging) {
                bbSwingTimer--;
                if (bbSwingTimer <= 0) bbSwinging = false;
            }
        }

        function drawBaseballGame() {
            // Limpiar
            bbCtx.clearRect(0, 0, bbCanvas.width, bbCanvas.height);

            // --- 1. EL CAMPO (Mejorado) ---
            
            // C√©sped (Patr√≥n de Rayas)
            const grassLight = "#4ade80";
            const grassDark = "#22c55e";
            bbCtx.fillStyle = grassLight;
            bbCtx.fillRect(0, 0, bbCanvas.width, bbCanvas.height);
            
            bbCtx.fillStyle = grassDark;
            for(let i = 0; i < bbCanvas.height; i+=50) {
                if((i/50) % 2 === 0) bbCtx.fillRect(0, i, bbCanvas.width, 50);
            }

            // El Diamante (Tierra)
            bbCtx.fillStyle = "#d97706"; // Tierra naranja/caf√©
            bbCtx.beginPath();
            // Forma del diamante
            bbCtx.moveTo(200, 100); // Mont√≠culo
            bbCtx.lineTo(350, 250); // 1ra
            bbCtx.lineTo(200, 450); // Home
            bbCtx.lineTo(50, 250);  // 3ra
            bbCtx.fill();
            
            // Infield Arc (Arco de tierra detr√°s del infield)
            bbCtx.beginPath();
            bbCtx.arc(200, 100, 160, 0.6, Math.PI - 0.6); // Arco superior
            bbCtx.lineTo(50, 250);
            bbCtx.lineTo(200, 450);
            bbCtx.lineTo(350, 250);
            bbCtx.fill();

            // L√≠neas de Foul (Cal)
            bbCtx.strokeStyle = "white";
            bbCtx.lineWidth = 3;
            bbCtx.beginPath();
            bbCtx.moveTo(200, 450); // Home
            bbCtx.lineTo(0, 200);   // Hacia jard√≠n izq
            bbCtx.moveTo(200, 450); // Home
            bbCtx.lineTo(400, 200); // Hacia jard√≠n der
            bbCtx.stroke();

            // Bases
            bbCtx.fillStyle = "white";
            bbCtx.fillRect(190, 440, 20, 20); // Home Plate
            bbCtx.fillRect(190, 90, 20, 10);  // Pitcher Plate (Rect√°ngulo)
            bbCtx.fillRect(340, 240, 20, 20); // 1ra Base
            bbCtx.fillRect(40, 240, 20, 20);  // 3ra Base
            // 2da Base (imaginaria fuera de c√°mara o arriba)

            // --- 2. EL P√öBLICO (Decoraci√≥n) ---
            // Unas gradas arriba
            bbCtx.fillStyle = "#374151"; // Gris oscuro (gradas)
            bbCtx.fillRect(0, 0, 400, 60);
            // Personitas (puntitos)
            for(let k=0; k<100; k++) {
                bbCtx.fillStyle = `hsl(${Math.random()*360}, 70%, 60%)`;
                bbCtx.beginPath();
                bbCtx.arc(Math.random()*400, Math.random()*50, 3, 0, Math.PI*2);
                bbCtx.fill();
            }


            // --- 3. EL PITCHER (Bot) ---
            const px = 200, py = 85;
            
            // Cuerpo (Uniforme)
            bbCtx.fillStyle = "#1e3a8a"; // Azul
            bbCtx.fillRect(px - 12, py + 10, 24, 30); 
            
            // Cabeza
            bbCtx.fillStyle = "#fca5a5"; // Piel
            bbCtx.beginPath();
            bbCtx.arc(px, py, 12, 0, Math.PI * 2);
            bbCtx.fill();

            // Gorra
            bbCtx.fillStyle = "#1e3a8a"; // Azul
            bbCtx.beginPath();
            bbCtx.arc(px, py - 4, 12, Math.PI, 0); // Media luna arriba
            bbCtx.fill();
            bbCtx.fillRect(px - 14, py - 4, 28, 4); // Visera

            // Brazos (simples)
            bbCtx.strokeStyle = "#fca5a5";
            bbCtx.lineWidth = 4;
            bbCtx.beginPath();
            bbCtx.moveTo(px - 12, py + 15);
            bbCtx.lineTo(px - 20, py + 25); // Brazo izq
            bbCtx.moveTo(px + 12, py + 15);
            bbCtx.lineTo(px + 20, py + 25); // Brazo der
            bbCtx.stroke();


            // --- 4. EL BATEADOR (Jugador) ---
            const bx = 160, by = 440;

            // Piernas
            bbCtx.fillStyle = "white"; // Pantalones
            bbCtx.fillRect(bx - 8, by + 30, 8, 20);
            bbCtx.fillRect(bx + 2, by + 30, 8, 20);

            // Cuerpo (Uniforme)
            bbCtx.fillStyle = "#e11d48"; // Rojo
            bbCtx.fillRect(bx - 10, by, 22, 30); 

            // Cabeza
            bbCtx.fillStyle = "#fca5a5"; // Piel
            bbCtx.beginPath();
            bbCtx.arc(bx + 1, by - 5, 11, 0, Math.PI * 2);
            bbCtx.fill();

            // Casco
            bbCtx.fillStyle = "#be123c"; // Rojo oscuro
            bbCtx.beginPath();
            bbCtx.arc(bx + 1, by - 8, 12, Math.PI, 0); 
            bbCtx.fill();
            bbCtx.fillRect(bx - 10, by - 8, 24, 6); // Visera

            // --- 5. EL BATE (Animaci√≥n) ---
            bbCtx.save();
            bbCtx.translate(bx + 15, by + 15); // Pivote cerca de las manos
            if (bbSwinging) {
                bbCtx.rotate(-Math.PI / 4); // Swing hacia adelante
                bbCtx.fillStyle = "#fbbf24"; // Dorado (hit)
            } else {
                bbCtx.rotate(-Math.PI / 1.2); // Posici√≥n de espera
                bbCtx.fillStyle = "#92400e"; // Madera
            }
            // Dibujar el bate
            bbCtx.beginPath();
            bbCtx.rect(0, -3, 50, 6); // Largo y ancho del bate
            bbCtx.fill();
            bbCtx.restore();


            // --- 6. LA BOLA ---
            if (bbPitching) {
                // Sombra
                bbCtx.fillStyle = "rgba(0,0,0,0.2)";
                bbCtx.beginPath();
                bbCtx.arc(bbBall.x + 5, bbBall.y + 5, bbBall.radius, 0, Math.PI*2);
                bbCtx.fill();

                // Bola blanca
                bbCtx.fillStyle = "white";
                bbCtx.beginPath();
                bbCtx.arc(bbBall.x, bbBall.y, bbBall.radius, 0, Math.PI*2);
                bbCtx.fill();
                
                // Costuras rojas
                bbCtx.strokeStyle = "red";
                bbCtx.lineWidth = 2;
                bbCtx.beginPath();
                // Costura curva 1
                bbCtx.arc(bbBall.x - 4, bbBall.y, bbBall.radius - 2, -0.5, 0.5);
                bbCtx.stroke();
                // Costura curva 2
                bbCtx.beginPath();
                bbCtx.arc(bbBall.x + 4, bbBall.y, bbBall.radius - 2, Math.PI - 0.5, Math.PI + 0.5);
                bbCtx.stroke();
            }
        }

        function triggerBaseballConfetti() {
            // Reusamos la funci√≥n de corazones pero podr√≠amos cambiar el emoji
            for(let i = 0; i < 20; i++) {
                const p = document.createElement('div');
                p.classList.add('heart-particle');
                p.innerHTML = '‚öæ'; // Pelotas volando
                p.style.left = Math.random() * 100 + 'vw';
                p.style.top = (window.innerHeight - 50) + 'px';
                const randomX = (Math.random() - 0.5) * 400; 
                p.style.setProperty('--random-x', randomX + 'px');
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 4000);
            }
        }
        
        // ======================================================
        // --- JUEGO 7: F√öTBOL 1VS1 (NUEVO & MEJORADO) ---
        // ======================================================
        let scCanvas, scCtx, scMessage, scScore1Disp, scScore2Disp, scName1Disp, scName2Disp;
        let scGameActive = false;
        let scScore1 = 0, scScore2 = 0;
        let scKeys = {}; // Para soportar m√∫ltiples teclas a la vez
        let scContainer, scSetupContainer, scGameArea;
        
        // Configuraci√≥n
        const scPlayerSize = 30; // Radio f√≠sico (hitbox)
        const scBallSize = 12; // Radio
        const scSpeed = 5;
        
        let scP1 = { x: 100, y: 200, color: '#e11d48', jerseyColor: '#be123c', score: 0, name: 'Jugador 1' }; // Rosa
        let scP2 = { x: 500, y: 200, color: '#3b82f6', jerseyColor: '#1d4ed8', score: 0, name: 'Jugador 2' }; // Azul
        let scBall = { x: 300, y: 200, dx: 0, dy: 0, speed: 4 };

        function initSoccer() {
            scCanvas = document.getElementById('soccerCanvas');
            scCtx = scCanvas.getContext('2d');
            scMessage = document.getElementById('soccer-message');
            scScore1Disp = document.getElementById('soccer-score-1');
            scScore2Disp = document.getElementById('soccer-score-2');
            scName1Disp = document.getElementById('soccer-name-1');
            scName2Disp = document.getElementById('soccer-name-2');
            
            scContainer = document.getElementById('game-soccer');
            scSetupContainer = document.getElementById('soccer-setup');
            scGameArea = document.getElementById('soccer-game-area');

            document.getElementById('soccerStartBtn').addEventListener('click', startSoccerMatch);
            document.getElementById('soccerResetBtn').addEventListener('click', resetSoccerSetup);

            // Listeners para teclas (Keydown y Keyup) para movimiento fluido
            window.addEventListener('keydown', (e) => { 
                scKeys[e.code] = true; 
                
                // --- PREVENIR SCROLL ---
                // Si el juego de f√∫tbol est√° visible y activo, bloqueamos las flechas
                if (scContainer && !scContainer.classList.contains('hidden') && scGameActive) {
                    if(["ArrowUp", "ArrowDown", "ArrowLeft", "ArrowRight"].includes(e.code)) {
                        e.preventDefault();
                    }
                }
            });
            window.addEventListener('keyup', (e) => { scKeys[e.code] = false; });

            requestAnimationFrame(soccerLoop);
        }
        
        function startSoccerMatch() {
            // Obtener nombres
            const p1Name = document.getElementById('p1NameInput').value.trim() || "Jugador 1";
            const p2Name = document.getElementById('p2NameInput').value.trim() || "Jugador 2";
            
            scP1.name = p1Name;
            scP2.name = p2Name;
            
            // Actualizar UI
            scName1Disp.textContent = p1Name;
            scName2Disp.textContent = p2Name;
            
            // Cambiar pantallas
            scSetupContainer.classList.add('hidden');
            scGameArea.classList.remove('hidden');
            
            resetSoccerGame();
        }
        
        function resetSoccerSetup() {
            scGameActive = false;
            scGameArea.classList.add('hidden');
            scSetupContainer.classList.remove('hidden');
        }

        function resetSoccerGame() {
            scGameActive = true;
            scScore1 = 0;
            scScore2 = 0;
            updateSoccerScore();
            resetBallSoccer();
            scMessage.textContent = "¬°Que empiece el partido!";
            scP1.x = 100; scP1.y = 200;
            scP2.x = 500; scP2.y = 200;
        }

        function resetBallSoccer() {
            scBall.x = scCanvas.width / 2;
            scBall.y = scCanvas.height / 2;
            // Direcci√≥n aleatoria
            let dir = Math.random() > 0.5 ? 1 : -1;
            scBall.dx = dir * scBall.speed;
            scBall.dy = (Math.random() * 4) - 2;
        }

        function updateSoccerScore() {
            scScore1Disp.textContent = scScore1;
            scScore2Disp.textContent = scScore2;
        }

        function soccerLoop() {
            if (scContainer && !scContainer.classList.contains('hidden') && !scGameArea.classList.contains('hidden')) {
                if(scGameActive) updateSoccerPhysics();
                drawSoccerGame();
            }
            requestAnimationFrame(soccerLoop);
        }

        function updateSoccerPhysics() {
            // --- Movimiento Jugador 1 (W/S) ---
            if (scKeys['KeyW'] && scP1.y > scPlayerSize) scP1.y -= scSpeed;
            if (scKeys['KeyS'] && scP1.y < scCanvas.height - scPlayerSize) scP1.y += scSpeed;
            if (scKeys['KeyA'] && scP1.x > scPlayerSize) scP1.x -= scSpeed;
            if (scKeys['KeyD'] && scP1.x < (scCanvas.width/2) - scPlayerSize) scP1.x += scSpeed;

            // --- Movimiento Jugador 2 (Flechas) ---
            if (scKeys['ArrowUp'] && scP2.y > scPlayerSize) scP2.y -= scSpeed;
            if (scKeys['ArrowDown'] && scP2.y < scCanvas.height - scPlayerSize) scP2.y += scSpeed;
            if (scKeys['ArrowLeft'] && scP2.x > (scCanvas.width/2) + scPlayerSize) scP2.x -= scSpeed;
            if (scKeys['ArrowRight'] && scP2.x < scCanvas.width - scPlayerSize) scP2.x += scSpeed;

            // --- Movimiento Bola ---
            scBall.x += scBall.dx;
            scBall.y += scBall.dy;

            // Rebote paredes superior/inferior
            if (scBall.y - scBallSize < 0 || scBall.y + scBallSize > scCanvas.height) {
                scBall.dy *= -1;
            }

            // Rebote paredes laterales (Goles)
            if (scBall.x < 0) {
                // Gol de P2
                scScore2++;
                updateSoccerScore();
                checkSoccerWin();
                resetBallSoccer();
            } else if (scBall.x > scCanvas.width) {
                // Gol de P1
                scScore1++;
                updateSoccerScore();
                checkSoccerWin();
                resetBallSoccer();
            }

            // --- Colisiones Bola-Jugador (C√≠rculo-C√≠rculo simple) ---
            checkPlayerBallColl(scP1);
            checkPlayerBallColl(scP2);
        }

        function checkPlayerBallColl(p) {
            let dx = scBall.x - p.x;
            let dy = scBall.y - p.y;
            let dist = Math.sqrt(dx*dx + dy*dy);
            
            if (dist < scPlayerSize + scBallSize) {
                // Colisi√≥n!
                // Calcular √°ngulo normal
                let angle = Math.atan2(dy, dx);
                let speed = Math.sqrt(scBall.dx*scBall.dx + scBall.dy*scBall.dy);
                
                // Aumentar un poco la velocidad con cada golpe para m√°s emoci√≥n
                speed = Math.min(speed * 1.05, 10); 

                scBall.dx = Math.cos(angle) * speed;
                scBall.dy = Math.sin(angle) * speed;
                
                // Evitar que la bola se pegue dentro del jugador
                let overlap = (scPlayerSize + scBallSize) - dist;
                scBall.x += Math.cos(angle) * overlap;
                scBall.y += Math.sin(angle) * overlap;
            }
        }

        function checkSoccerWin() {
            if (scScore1 >= 5) {
                scGameActive = false;
                scMessage.textContent = `¬°${scP1.name} Gana! üèÜ`;
                triggerSoccerConfetti();
            } else if (scScore2 >= 5) {
                scGameActive = false;
                scMessage.textContent = `¬°${scP2.name} Gana! üèÜ`;
                triggerSoccerConfetti();
            } else {
                scMessage.textContent = "¬°GOL!";
                setTimeout(() => { 
                    if(scGameActive) scMessage.textContent = ""; 
                }, 1500);
            }
        }

        function drawSoccerGame() {
            // Limpiar
            scCtx.clearRect(0, 0, scCanvas.width, scCanvas.height);

            // --- CAMPO ---
            // C√©sped rayado
            scCtx.fillStyle = "#22c55e"; // Green-500
            scCtx.fillRect(0, 0, scCanvas.width, scCanvas.height);
            scCtx.fillStyle = "#16a34a"; // Green-600 (Rayas)
            for (let i=0; i<scCanvas.width; i+=60) {
                if((i/60)%2===0) scCtx.fillRect(i, 0, 60, scCanvas.height);
            }

            // L√≠neas Blancas
            scCtx.strokeStyle = "rgba(255,255,255,0.7)";
            scCtx.lineWidth = 3;
            scCtx.beginPath();
            // Borde
            scCtx.strokeRect(10, 10, scCanvas.width-20, scCanvas.height-20);
            // Medio campo
            scCtx.moveTo(scCanvas.width/2, 10);
            scCtx.lineTo(scCanvas.width/2, scCanvas.height-10);
            scCtx.stroke();
            // C√≠rculo central
            scCtx.beginPath();
            scCtx.arc(scCanvas.width/2, scCanvas.height/2, 50, 0, Math.PI*2);
            scCtx.stroke();
            
            // Porter√≠as (√Åreas)
            scCtx.strokeRect(10, scCanvas.height/2 - 60, 40, 120); // Izq
            scCtx.strokeRect(scCanvas.width - 50, scCanvas.height/2 - 60, 40, 120); // Der

            // --- JUGADORES (Dibujados como personitas vistas desde arriba) ---
            drawFootballer(scP1);
            drawFootballer(scP2);

            // --- BOLA ---
            scCtx.fillStyle = "white";
            scCtx.beginPath();
            scCtx.arc(scBall.x, scBall.y, scBallSize, 0, Math.PI*2);
            scCtx.fill();
            // Detalles bal√≥n (pent√°gonos simples)
            scCtx.fillStyle = "black";
            scCtx.beginPath();
            scCtx.arc(scBall.x, scBall.y, scBallSize/2, 0, Math.PI*2);
            scCtx.fill();
        }

        function drawFootballer(p) {
            // Sombra general
            scCtx.fillStyle = "rgba(0,0,0,0.2)";
            scCtx.beginPath();
            scCtx.arc(p.x+3, p.y+3, scPlayerSize, 0, Math.PI*2);
            scCtx.fill();

            // --- CUERPO (Camiseta - Hombros) ---
            // Dibujamos un rect√°ngulo redondeado para los hombros
            scCtx.fillStyle = p.jerseyColor;
            // Hombro Izq a Der
            scCtx.beginPath();
            scCtx.roundRect(p.x - 24, p.y - 12, 48, 24, 8);
            scCtx.fill();
            
            // Detalle en la camiseta (Franja o n√∫mero peque√±o)
            scCtx.fillStyle = "white";
            scCtx.font = "bold 10px Arial";
            scCtx.textAlign = "center";
            scCtx.textBaseline = "middle";
            scCtx.fillText("10", p.x - 12, p.y); // N√∫mero en el hombro

            // --- CABEZA ---
            scCtx.fillStyle = "#fca5a5"; // Color Piel
            scCtx.beginPath();
            scCtx.arc(p.x, p.y, 14, 0, Math.PI*2); // Cabeza en el centro
            scCtx.fill();
            
            // Pelo (Un c√≠rculo oscuro desplazado ligeramente)
            scCtx.fillStyle = "#4b5563"; // Pelo oscuro
            scCtx.beginPath();
            scCtx.arc(p.x, p.y - 2, 14, Math.PI, 0); // Parte superior de la cabeza
            scCtx.fill();
        }

        function triggerSoccerConfetti() {
            for(let i = 0; i < 30; i++) {
                const p = document.createElement('div');
                p.classList.add('heart-particle');
                p.innerHTML = '‚öΩ'; 
                p.style.left = Math.random() * 100 + 'vw';
                p.style.top = (window.innerHeight - 50) + 'px';
                const randomX = (Math.random() - 0.5) * 400; 
                p.style.setProperty('--random-x', randomX + 'px');
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 4000);
            }
        }

    </script>
</body>
</html>