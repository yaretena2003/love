<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 1. T√≠tulo espec√≠fico de la p√°gina -->
    <title>JUEGOS</title>
    
    <!-- 2. Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 3. Carga de Fuentes de Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Lato:wght@400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    
    <!-- 4. Configuraci√≥n de Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Lato', 'sans-serif'],
                        heading: ['Playfair Display', 'serif'],
                        script: ['Great Vibes', 'cursive'],
                    }
                }
            }
        }
    </script>
    
    <!-- 5. Estilos -->
    <style>
        /* Estilos generales (compatibles con las otras p√°ginas) */
        .heart-particle {
            position: fixed;
            font-size: 24px;
            color: #e11d48;
            pointer-events: none;
            z-index: 1000;
            animation: floatUp 4s ease-out forwards;
        }
        @keyframes floatUp {
            0% {
                transform: translateY(0) translateX(0) scale(1);
                opacity: 1;
            }
            100% {
                transform: translateY(-800px) translateX(var(--random-x)) scale(0.5);
                opacity: 0;
            }
        }

        /* --- Estilos Espec√≠ficos para los Juegos --- */
        
        /* Sub-men√∫ interno de juegos */
        .game-nav-link {
            padding: 0.5rem 1rem;
            border-radius: 999px; /* pill */
            font-weight: 600;
            color: #4b5563; /* text-gray-600 */
            background-color: #f9fafb; /* bg-gray-50 */
            border: 2px solid #fecdd3; /* border-rose-200 */
            transition: all 0.2s ease;
        }
        .game-nav-link:hover {
            background-color: #ffe4e6;
            color: #be185d; /* text-pink-600 */
        }
        .game-nav-link.active-game {
            background-color: #e11d48; /* bg-rose-600 */
            color: white;
            border-color: #e11d48;
        }

        /* Tic-Tac-Toe */
        .ttt-cell { transition: background-color 0.2s ease; }
        .ttt-cell:hover { background-color: #ffe4e6; }

        /* Memorama */
        .memo-card { perspective: 1000px; }
        .memo-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        .memo-card.is-flipped .memo-card-inner { transform: rotateY(180deg); }
        .memo-card-front, .memo-card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 0.5rem;
        }
        .memo-card-front {
            background-color: #fbcfe8;
            border: 2px solid white;
            font-size: 3rem;
            color: #e11d48;
        }
        .memo-card-back {
            background-color: #ffffff;
            border: 2px solid #fecdd3;
            transform: rotateY(180deg);
        }
        .memo-card-back img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 0.5rem;
        }
        /* Borde verde cuando se encuentra el par */
        .memo-matched {
            border-color: #4ade80 !important; 
            box-shadow: 0 0 10px #4ade80;
        }

        /* Sopa de Letras */
        .sopa-cell {
            font-family: monospace;
            text-transform: uppercase;
            transition: background-color 0.1s ease;
        }
        .sopa-cell.selected {
            background-color: #fbcfe8;
            color: #be185d;
        }
        .sopa-word.found {
            text-decoration: line-through;
            color: #9ca3af;
        }

        /* Ahorcado */
        .ahorcado-letter {
            width: 2.5rem;
            height: 3rem;
            border-bottom: 4px solid #fecdd3;
        }
        .ahorcado-letter.filled { border-bottom-color: #e11d48; }
        .keyboard-key { transition: all 0.1s ease; }
        .keyboard-key:disabled { opacity: 0.3; background-color: #e5e7eb; }

        /* Unidos por la Eternidad */
        #unidosCanvas {
            background-color: #fafaf9;
            border: 4px solid #fecdd3;
            border-radius: 0.5rem;
            max-width: 100%;
        }
    </style>
</head>
<body class="bg-rose-50 font-sans text-gray-700">

    <!-- Barra Superior -->
    <div class="bg-white p-4 shadow-sm sticky top-0 z-50">
        <div class="container mx-auto max-w-5xl flex justify-between items-center">
            
            <!-- Logo/Iniciales (Igual que index.html) -->
            <div class="font-heading text-3xl font-bold text-gray-800">
                <span class="w-20 h-20 mx-auto block rounded-full"><img src="imagenes/logo.png" alt="Logo"></span>
            </div>
            
            <!-- Men√∫ de Navegaci√≥n (Estilo id√©ntico a index, galeria, video) -->
            <nav class="flex gap-4 sm:gap-6 flex-wrap justify-end">
                <a href="index.html" 
                   class="text-gray-600 font-medium hover:text-rose-600 transition-colors duration-200">Inicio</a>
                
                <a href="galeria.html" 
                   class="text-gray-600 font-medium hover:text-rose-600 transition-colors duration-200">Galer√≠a</a>
                
                <a href="video.html" 
                   class="text-gray-600 font-medium hover:text-rose-600 transition-colors duration-200">Video</a>
                
                <a href="carta.html" 
                   class="text-gray-600 font-medium hover:text-rose-600 transition-colors duration-200">Carta</a>
                
                <!-- Enlace activo para JUEGOS -->
                <a href="juegos.html" 
                   class="text-rose-600 font-bold transition-colors duration-200">Juegos</a>
                
                <!-- BOT√ìN DE SALIR -->
                <button id="logout-button" 
                        class="text-gray-500 font-medium hover:text-rose-600 transition-colors duration-200 border-l pl-4 sm:pl-6 border-gray-200">
                    Salir
                </button>
            </nav>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="bg-gradient-to-r from-pink-300 to-rose-200 text-center py-24 sm:py-32 relative overflow-hidden">
        <div class="relative z-10">
            <h1 class="font-heading text-7xl sm:text-8xl text-white font-bold tracking-tight mb-4 drop-shadow-lg">
                Para Mi Amor
            </h1>
            <p class="font-heading text-2xl sm:text-3xl text-white opacity-90 mb-6 drop-shadow">
                Un peque√±o rinc√≥n de nuestro mundo.
            </p>
        </div>
    </section>

    <!-- Contenedor principal -->
    <div class="container mx-auto max-w-5xl p-4 sm:p-8 relative z-10 -mt-16">
        <main>
            
            <!-- ======================= -->
            <!-- ¬† P√ÅGINA 5: JUEGOS ¬† ¬† ¬† -->
            <!-- ======================= -->
            <section id="page-games" class="bg-white p-8 sm:p-12 rounded-2xl shadow-lg">
                <h2 class="font-heading text-4xl text-center text-rose-600 mb-8 border-b pb-4 border-rose-100">Nuestros Juegos</h2>

                <!-- Sub-Men√∫ de Juegos (Esto se queda igual para navegar ENTRE juegos) -->
                <div class="flex justify-center gap-2 sm:gap-4 mb-8 flex-wrap">
                    <button class="game-nav-link active-game" data-game="tic-tac-toe">Tres en Raya</button>
                    <button class="game-nav-link" data-game="memorama">Memorama</button>
                    <button class="game-nav-link" data-game="sopa-letras">Sopa de Letras</button>
                    <!--<button class="game-nav-link" data-game="ahorcado">Ahorcado</button>-->
                    <button class="game-nav-link" data-game="unidos">Unidos por la Eternidad</button>
                </div>

                <!-- Contenedor para el juego activo -->
                <div id="game-container" class="mt-8">

                    <!-- --- Juego 1: Tres en Raya --- -->
                    <div id="game-tic-tac-toe" class="game-content">
                        <p class="text-lg text-center text-gray-700 mb-4">
                            Un cl√°sico... ¬°Tres en Raya!
                        </p>
                        <div id="tttStatusMessage" class="text-center text-2xl font-semibold text-gray-800 mb-6 h-8">
                            Turno del jugador X
                        </div>
                        <div class="max-w-md mx-auto">
                            <div class="grid grid-cols-3 gap-2 sm:gap-4 w-max mx-auto">
                                <div data-cell-index="0" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="1" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="2" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="3" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="4" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="5" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="6" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="7" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                                <div data-cell-index="8" class="ttt-cell w-24 h-24 sm:w-32 sm:h-32 bg-rose-50 border-2 border-rose-200 rounded-lg cursor-pointer flex items-center justify-center text-5xl sm:text-7xl font-bold"></div>
                            </div>
                        </div>
                        <div class="text-center mt-8">
                            <button id="tttResetButton" class="bg-rose-500 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition-all duration-300 hover:bg-rose-700 hover:shadow-xl active:scale-95">
                                Reiniciar Juego
                            </button>
                        </div>
                    </div>

                    <!-- --- Juego 2: Memorama --- -->
                    <div id="game-memorama" class="game-content hidden">
                        <p class="text-lg text-center text-gray-700 mb-4">
                            Encuentra los pares. ¬°Usa nuestras fotos!
                        </p>
                        <div id="memoStatusMessage" class="text-center text-2xl font-semibold text-gray-800 mb-6 h-8">
                            Intentos: 0
                        </div>
                        <div id="memo-board" class="grid grid-cols-4 gap-2 sm:gap-4 max-w-lg mx-auto">
                            <!-- Las cartas se generar√°n aqu√≠ con JavaScript -->
                        </div>
                        <div class="text-center mt-8">
                            <button id="memoResetButton" class="bg-rose-500 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition-all duration-300 hover:bg-rose-700 hover:shadow-xl active:scale-95">
                                Reiniciar Juego
                            </button>
                        </div>
                    </div>

                    <!-- --- Juego 3: Sopa de Letras --- -->
                    <div id="game-sopa-letras" class="game-content hidden">
                        <p class="text-lg text-center text-gray-700 mb-4">
                            Encuentra las palabras de nuestra historia.
                        </p>
                        <!-- Nuevo: Mensaje de estado para la sopa -->
                        <div id="sopaStatus" class="text-center text-2xl font-bold text-rose-600 mb-4 h-8 min-h-[2rem]"></div>
                        
                        <div class="flex flex-col lg:flex-row gap-8 justify-center items-center">
                            <!-- Lista de Palabras -->
                            <div class="p-6 bg-rose-50 rounded-lg shadow-inner">
                                <h3 class="font-heading text-2xl text-rose-600 mb-4">Palabras a encontrar:</h3>
                                <ul id="sopa-word-list" class="space-y-2">
                                    <!-- Se generar√° con JS -->
                                </ul>
                            </div>
                            <!-- Tablero de Sopa -->
                            <div id="sopa-board" class="grid grid-cols-10 gap-1 p-2 bg-white border-2 border-rose-200 rounded-lg shadow-md w-max">
                                <!-- Se generar√° con JS -->
                            </div>
                        </div>
                        <div class="text-center mt-8 space-x-4">
                            <button id="sopaClearButton" class="bg-gray-400 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition-all duration-300 hover:bg-gray-500 active:scale-95">
                                Limpiar Selecci√≥n
                            </button>
                            <button id="sopaCheckButton" class="bg-rose-500 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition-all duration-300 hover:bg-rose-700 hover:shadow-xl active:scale-95">
                                Comprobar Palabra
                            </button>
                        </div>
                    </div>

                    <!-- --- Juego 4: Ahorcado --- -->
                    <div id="game-ahorcado" class="game-content hidden">
                        <p class="text-lg text-center text-gray-700 mb-4">
                            ¬°Adivina la palabra secreta!
                        </p>
                        <div id="ahorcadoDisplay" class="flex justify-center gap-2 sm:gap-4 mb-8">
                            <!-- Letras de la palabra a adivinar -->
                        </div>
                        <div id="ahorcadoStatus" class="text-center text-5xl mb-6 h-16">
                            <!-- Vidas restantes (emoji) -->
                        </div>
                        <div id="ahorcadoKeyboard" class="max-w-lg mx-auto flex flex-wrap justify-center gap-2">
                            <!-- Teclado se genera con JS -->
                        </div>
                        <div class="text-center mt-8">
                            <button id="ahorcadoResetButton" class="bg-rose-500 text-white font-bold py-3 px-8 rounded-full shadow-lg text-lg transition-all duration-300 hover:bg-rose-700 hover:shadow-xl active:scale-95">
                                Reiniciar Juego
                            </button>
                        </div>
                    </div>

                    <!-- --- Juego 5: Unidos por la Eternidad --- -->
                    <div id="game-unidos" class="game-content hidden">
                        <p class="text-lg text-center text-gray-700 mb-4">
                            Ayuda al novio a llegar con la novia. ¬°Evita los obst√°culos!
                        </p>
                        <p class="text-center text-gray-500 mb-4">Usa las <strong>Flechas del Teclado</strong> para moverte.</p>
                        
                        <div id="unidosStatus" class="text-center text-3xl font-bold text-rose-600 mb-4 h-10">
                            <!-- Mensaje de victoria -->
                        </div>

                        <canvas id="unidosCanvas" width="700" height="500" class="mx-auto">
                            Tu navegador no soporta canvas.
                        </canvas>
                    </div>

                </div>
            </section>
        </main>
    </div>

    <!-- Footer -->
    <footer class="bg-rose-50 text-center py-12 mt-20">
        <p class="text-lg text-gray-700">
            Hecho con todo mi amor para ti,
        </p>
        <p class="font-script text-6xl text-rose-600 mt-2">
            Yaremi Arlette
        </p>
    </footer>

    <!-- JavaScript (TODA LA L√ìGICA) -->
    <script>
        // --- L√ìGICA DE LOGOUT (SALIR) ---
        const logoutButton = document.getElementById('logout-button');
        if (logoutButton) {
            logoutButton.addEventListener('click', () => {
                window.location.href = 'index.html';
            });
        }

        // --- L√ìGICA DE NAVEGACI√ìN DE JUEGOS (Sub-men√∫) ---
        document.addEventListener('DOMContentLoaded', () => {
            const gameNavLinks = document.querySelectorAll('.game-nav-link');
            const gameContents = document.querySelectorAll('.game-content');
            
            // Inicializar todos los juegos una vez
            initTicTacToe();
            initMemorama();
            initSopaLetras();
            initAhorcado();
            initUnidos(); 

            gameNavLinks.forEach(link => {
                link.addEventListener('click', () => {
                    const targetGameId = link.dataset.game;

                    // Ocultar todos los juegos
                    gameContents.forEach(game => game.classList.add('hidden'));
                    
                    // Quitar clase activa de todos los links del submen√∫
                    gameNavLinks.forEach(nav => nav.classList.remove('active-game'));

                    // Mostrar el juego seleccionado
                    const targetGame = document.getElementById(`game-${targetGameId}`);
                    if (targetGame) {
                        targetGame.classList.remove('hidden');
                    }
                    
                    // A√±adir clase activa al link seleccionado
                    link.classList.add('active-game');
                });
            });
        });

        // ======================================================
        // --- L√ìGICA JUEGO 1: TRES EN RAYA (TIC-TAC-TOE) ---
        // ======================================================
        let tttStatusMessage, tttResetButton, tttCells;
        let tttCurrentPlayer = 'X';
        let tttGameActive = true;
        let tttGameState = ["", "", "", "", "", "", "", "", ""];
        const tttWinningConditions = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8],
            [0, 3, 6], [1, 4, 7], [2, 5, 8],
            [0, 4, 8], [2, 4, 6]
        ];

        const tttWinningMessage = () => `¬°El jugador ${tttCurrentPlayer} ha ganado! üéâ`;
        const tttDrawMessage = () => `¬°Juego Empatado! ü§ù`;
        const tttCurrentPlayerTurn = () => `Turno del jugador ${tttCurrentPlayer}`;

        function initTicTacToe() {
            tttStatusMessage = document.getElementById('tttStatusMessage');
            tttResetButton = document.getElementById('tttResetButton');
            tttCells = document.querySelectorAll('.ttt-cell');

            tttCells.forEach(cell => cell.addEventListener('click', handleTttCellClick));
            tttResetButton.addEventListener('click', resetTicTacToe);
            resetTicTacToe();
        }

        function handleTttCellClick(e) {
            const clickedCell = e.target;
            const clickedCellIndex = parseInt(clickedCell.getAttribute('data-cell-index'));

            if (tttGameState[clickedCellIndex] !== "" || !tttGameActive) {
                return;
            }

            handleTttCellPlayed(clickedCell, clickedCellIndex);
            handleTttResultValidation();
        }

        function handleTttCellPlayed(clickedCell, clickedCellIndex) {
            tttGameState[clickedCellIndex] = tttCurrentPlayer;
            clickedCell.innerHTML = tttCurrentPlayer;
            if (tttCurrentPlayer === 'X') {
                clickedCell.classList.add('text-rose-600');
            } else {
                clickedCell.classList.add('text-pink-500');
            }
        }

        function handleTttResultValidation() {
            let roundWon = false;
            for (let i = 0; i < tttWinningConditions.length; i++) {
                const winCondition = tttWinningConditions[i];
                let a = tttGameState[winCondition[0]];
                let b = tttGameState[winCondition[1]];
                let c = tttGameState[winCondition[2]];
                if (a === '' || b === '' || c === '') continue;
                if (a === b && b === c) {
                    roundWon = true;
                    break;
                }
            }

            if (roundWon) {
                tttStatusMessage.innerHTML = tttWinningMessage();
                tttGameActive = false;
                return;
            }

            let roundDraw = !tttGameState.includes("");
            if (roundDraw) {
                tttStatusMessage.innerHTML = tttDrawMessage();
                tttGameActive = false;
                return;
            }

            handleTttPlayerChange();
        }

        function handleTttPlayerChange() {
            tttCurrentPlayer = tttCurrentPlayer === "X" ? "O" : "X";
            tttStatusMessage.innerHTML = tttCurrentPlayerTurn();
        }

        function resetTicTacToe() {
            tttGameActive = true;
            tttCurrentPlayer = "X";
            tttGameState = ["", "", "", "", "", "", "", "", ""];
            if (tttStatusMessage) tttStatusMessage.innerHTML = tttCurrentPlayerTurn();
            if (tttCells) {
                tttCells.forEach(cell => {
                    cell.innerHTML = "";
                    cell.classList.remove('text-rose-600', 'text-pink-500');
                });
            }
        }

        // ======================================================
        // --- JUEGO 2: MEMORAMA (CORREGIDO) ---
        // ======================================================
        let memoBoard, memoStatusMessage, memoResetButton;
        
        // IMPORTANTE: Los 'id' deben ser iguales para las parejas
        let memoCardsData = [
            { id: 1, img: 'imagenes/1.jpeg' },
            { id: 1, img: 'imagenes/1.jpeg' }, 
            { id: 2, img: 'imagenes/2.jpeg' },
            { id: 2, img: 'imagenes/2.jpeg' }, 
            { id: 3, img: 'imagenes/3.jpeg' },
            { id: 3, img: 'imagenes/3.jpeg' }, 
            { id: 4, img: 'imagenes/4.jpeg' }, 
            { id: 4, img: 'imagenes/4.jpeg' }, 
            { id: 5, img: 'imagenes/5.jpeg' }, 
            { id: 5, img: 'imagenes/5.jpeg' }, 
            { id: 6, img: 'imagenes/6.jpeg' }, 
            { id: 6, img: 'imagenes/6.jpeg' }, 
        ];
        
        let memoFlippedCards = [];
        let memoLockBoard = false;
        let memoAttempts = 0;
        let memoPairsFound = 0;

        function initMemorama() {
            memoBoard = document.getElementById('memo-board');
            memoStatusMessage = document.getElementById('memoStatusMessage');
            memoResetButton = document.getElementById('memoResetButton');
            memoResetButton.addEventListener('click', resetMemorama);
            resetMemorama();
        }

        function createMemoBoard() {
            memoBoard.innerHTML = '';
            memoPairsFound = 0;
            memoAttempts = 0;
            memoStatusMessage.innerHTML = `Intentos: 0`;
            
            // Barajar cartas
            memoCardsData.sort(() => 0.5 - Math.random());

            memoCardsData.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.classList.add('memo-card', 'h-24', 'w-full', 'cursor-pointer');
                cardElement.dataset.id = card.id;
                cardElement.dataset.index = index; // Identificador √∫nico para posici√≥n

                cardElement.innerHTML = `
                    <div class="memo-card-inner">
                        <div class="memo-card-front">üíñ</div>
                        <div class="memo-card-back">
                            <img src="${card.img}" alt="Recuerdo">
                        </div>
                    </div>
                `;
                cardElement.addEventListener('click', handleMemoFlip);
                memoBoard.appendChild(cardElement);
            });
        }

        function handleMemoFlip() {
            if (memoLockBoard) return;
            if (this.classList.contains('is-flipped')) return; // Evitar doble clic

            this.classList.add('is-flipped');
            memoFlippedCards.push(this);

            if (memoFlippedCards.length === 2) {
                memoLockBoard = true;
                memoAttempts++;
                memoStatusMessage.innerHTML = `Intentos: ${memoAttempts}`;
                checkForMemoMatch();
            }
        }

        function checkForMemoMatch() {
            const [card1, card2] = memoFlippedCards;
            // Verificar si los IDs coinciden
            const isMatch = card1.dataset.id === card2.dataset.id && card1.dataset.index !== card2.dataset.index;

            if (isMatch) {
                memoPairsFound++;
                disableMemoCards();
                if (memoPairsFound === memoCardsData.length / 2) {
                    memoStatusMessage.innerHTML = `¬°Ganaste en ${memoAttempts} intentos! üéâ`;
                }
            } else {
                unflipMemoCards();
            }
        }

        function disableMemoCards() {
            memoFlippedCards.forEach(card => {
                card.removeEventListener('click', handleMemoFlip);
                // A√±adir borde verde para confirmar que se encontraron
                card.querySelector('.memo-card-back').classList.add('memo-matched');
            });
            resetMemoTurn();
        }

        function unflipMemoCards() {
            setTimeout(() => {
                memoFlippedCards.forEach(card => card.classList.remove('is-flipped'));
                resetMemoTurn();
            }, 1200);
        }

        function resetMemoTurn() {
            memoFlippedCards = [];
            memoLockBoard = false;
        }

        function resetMemorama() {
            createMemoBoard();
        }

        // ======================================================
        // --- JUEGO 3: SOPA DE LETRAS (ACTUALIZADO) ---
        // ======================================================
        let sopaBoard, sopaWordList, sopaCheckButton, sopaClearButton, sopaStatus;
        const sopaWords = ['PAPOI', 'TINKYWINKY', 'EAMO', 'GUAPITO', 'AHAHAH', 'VIEJOFEO'];
        let sopaWordsFound = [];
        let sopaCurrentSelection = []; 
        const sopaGridSize = 10;
        const sopaGrid = [
            ['A', 'A', 'H', 'A', 'H', 'A', 'H', 'M', 'N', 'T'],
            ['B', 'H', 'J', 'U', 'N', 'T', 'O', 'E', 'P', 'I'],
            ['R', 'A', 'S', 'T', 'U', 'V', 'W', 'A', 'O', 'N'],
            ['G', 'U', 'A', 'P', 'I', 'T', 'O', 'M', 'D', 'K'],
            ['S', 'H', 'Y', 'X', 'M', 'O', 'E', 'O', 'G', 'Y'],
            ['I', 'J', 'R', 'L', 'M', 'Z', 'O', 'P', 'Q', 'W'],
            ['V', 'I', 'E', 'J', 'O', 'F', 'E', 'O', 'Z', 'I'],
            ['P', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'N'],
            ['R', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'K'],
            ['A', 'P', 'A', 'P', 'O', 'I', 'U', 'V', 'W', 'Y']
        ];
        
        function initSopaLetras() {
            sopaBoard = document.getElementById('sopa-board');
            sopaWordList = document.getElementById('sopa-word-list');
            sopaCheckButton = document.getElementById('sopaCheckButton');
            sopaClearButton = document.getElementById('sopaClearButton');
            sopaStatus = document.getElementById('sopaStatus'); // Nuevo

            sopaCheckButton.addEventListener('click', checkSopaWord);
            sopaClearButton.addEventListener('click', clearSopaSelection);
            
            resetSopaLetras();
        }
        
        function createSopaBoard() {
            sopaBoard.innerHTML = '';
            sopaCurrentSelection = [];
            
            for (let r = 0; r < sopaGridSize; r++) {
                for (let c = 0; c < sopaGridSize; c++) {
                    const cell = document.createElement('div');
                    cell.classList.add('sopa-cell', 'w-8', 'h-8', 'sm:w-10', 'sm:h-10', 'flex', 'items-center', 'justify-center', 'text-lg', 'font-bold', 'cursor-pointer', 'select-none');
                    cell.dataset.r = r;
                    cell.dataset.c = c;
                    cell.textContent = sopaGrid[r][c];
                    cell.addEventListener('click', () => handleSopaCellClick(cell));
                    sopaBoard.appendChild(cell);
                }
            }
        }
        
        function updateSopaWordList() {
            sopaWordList.innerHTML = '';
            sopaWords.forEach(word => {
                const li = document.createElement('li');
                li.textContent = word;
                li.classList.add('sopa-word', 'text-lg', 'font-medium', 'text-gray-700');
                if (sopaWordsFound.includes(word)) {
                    li.classList.add('found');
                }
                sopaWordList.appendChild(li);
            });
        }
        
        function handleSopaCellClick(cell) {
            if (cell.classList.contains('selected')) {
                cell.classList.remove('selected');
                sopaCurrentSelection = sopaCurrentSelection.filter(sel => sel.cell !== cell);
            } else {
                cell.classList.add('selected');
                sopaCurrentSelection.push({ cell, letter: cell.textContent });
            }
        }
        
        function clearSopaSelection() {
            sopaCurrentSelection.forEach(sel => sel.cell.classList.remove('selected'));
            sopaCurrentSelection = [];
        }
        
        function checkSopaWord() {
            const selectedWord = sopaCurrentSelection.map(sel => sel.letter).join('');
            
            if (sopaWords.includes(selectedWord) && !sopaWordsFound.includes(selectedWord)) {
                sopaWordsFound.push(selectedWord);
                sopaCurrentSelection.forEach(sel => {
                    sel.cell.classList.add('bg-green-200', 'text-green-800');
                    sel.cell.classList.remove('selected');
                });
                updateSopaWordList();
                clearSopaSelection();
                
                // ¬°Lanzar corazones al encontrar CUALQUIER palabra!
                triggerSopaCelebration();
                
                if (sopaWordsFound.length === sopaWords.length) {
                    // Todos encontrados - Mensaje de felicitaci√≥n
                    if (sopaStatus) {
                        sopaStatus.innerHTML = "¬°Felicidades! üíñ Has encontrado todas las palabras";
                    }
                    setTimeout(() => triggerSopaCelebration(), 500); // Doble celebraci√≥n al final
                }
            } else {
                sopaCurrentSelection.forEach(sel => {
                    sel.cell.classList.add('bg-red-200');
                });
                setTimeout(() => {
                    sopaCurrentSelection.forEach(sel => sel.cell.classList.remove('bg-red-200'));
                    clearSopaSelection();
                }, 500);
            }
        }

        function resetSopaLetras() {
            sopaWordsFound = [];
            if(sopaStatus) sopaStatus.innerHTML = ""; // Limpiar mensaje
            createSopaBoard();
            updateSopaWordList();
        }

        // Funci√≥n para generar la lluvia de corazones
        function triggerSopaCelebration() {
            for(let i = 0; i < 30; i++) {
                const heart = document.createElement('div');
                heart.classList.add('heart-particle');
                heart.innerHTML = 'üíñ';
                
                // Posici√≥n inicial aleatoria en la parte inferior de la pantalla
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.top = (window.innerHeight - 50) + 'px';
                
                // Direcci√≥n aleatoria para que floten hacia los lados
                const randomX = (Math.random() - 0.5) * 400; 
                heart.style.setProperty('--random-x', randomX + 'px');
                
                // Tama√±o aleatorio
                const randomScale = Math.random() * 0.5 + 0.5;
                heart.style.transform = `scale(${randomScale})`;

                document.body.appendChild(heart);
                
                // Limpiar despu√©s de la animaci√≥n
                setTimeout(() => heart.remove(), 4000);
            }
        }

        // ======================================================
        // --- JUEGO 4: AHORCADO ---
        // ======================================================
        let ahorcadoWord = "ERES EL AMOR DE MI VIDA"; 
        let ahorcadoGuessedWord, ahorcadoWrongGuesses, ahorcadoGameActive;
        let ahorcadoDisplay, ahorcadoStatus, ahorcadoKeyboard, ahorcadoResetButton;
        const ahorcadoVidasEmojis = ['üòä', 'üòü', 'üò•', 'üò®', 'üò±', 'üòµ'];
        
        function initAhorcado() {
            ahorcadoDisplay = document.getElementById('ahorcadoDisplay');
            ahorcadoStatus = document.getElementById('ahorcadoStatus');
            ahorcadoKeyboard = document.getElementById('ahorcadoKeyboard');
            ahorcadoResetButton = document.getElementById('ahorcadoResetButton');

            createAhorcadoKeyboard();
            ahorcadoResetButton.addEventListener('click', resetAhorcado);
            resetAhorcado();
        }
        
        function resetAhorcado() {
            ahorcadoGuessedWord = Array(ahorcadoWord.length).fill('_');
            ahorcadoWrongGuesses = 0;
            ahorcadoGameActive = true;
            
            updateAhorcadoDisplay();
            ahorcadoStatus.innerHTML = ahorcadoVidasEmojis[ahorcadoWrongGuesses];
            
            // Reactivar todas las teclas
            document.querySelectorAll('.keyboard-key').forEach(key => key.disabled = false);
        }
        
        function createAhorcadoKeyboard() {
            ahorcadoKeyboard.innerHTML = '';
            'ABCDEFGHIJKLMN√ëOPQRSTUVWXYZ'.split('').forEach(letter => {
                const key = document.createElement('button');
                key.textContent = letter;
                key.classList.add('keyboard-key', 'w-10', 'h-10', 'sm:w-12', 'sm:h-12', 'bg-rose-100', 'border-2', 'border-rose-200', 'rounded-lg', 'font-bold', 'text-gray-700', 'hover:bg-rose-200', 'active:scale-95');
                key.addEventListener('click', () => handleAhorcadoGuess(letter));
                ahorcadoKeyboard.appendChild(key);
            });
        }
        
        function updateAhorcadoDisplay() {
            ahorcadoDisplay.innerHTML = '';
            ahorcadoGuessedWord.forEach(letter => {
                const letterEl = document.createElement('div');
                letterEl.classList.add('ahorcado-letter', 'text-4xl', 'font-bold', 'flex', 'items-center', 'justify-center', 'text-rose-700');
                if (letter !== '_') {
                    letterEl.textContent = letter;
                    letterEl.classList.add('filled');
                }
                ahorcadoDisplay.appendChild(letterEl);
            });
        }

        function handleAhorcadoGuess(letter) {
            if (!ahorcadoGameActive) return;

            // Desactivar la tecla
            const key = Array.from(ahorcadoKeyboard.children).find(k => k.textContent === letter);
            if (key) key.disabled = true;

            if (ahorcadoWord.includes(letter)) {
                // Acierto
                for (let i = 0; i < ahorcadoWord.length; i++) {
                    if (ahorcadoWord[i] === letter) {
                        ahorcadoGuessedWord[i] = letter;
                    }
                }
            } else {
                // Error
                ahorcadoWrongGuesses++;
            }
            
            updateAhorcadoDisplay();
            checkAhorcadoGameStatus();
        }
        
        function checkAhorcadoGameStatus() {
            ahorcadoStatus.innerHTML = ahorcadoVidasEmojis[ahorcadoWrongGuesses];

            if (!ahorcadoGuessedWord.includes('_')) {
                // Victoria
                ahorcadoStatus.innerHTML = '¬°Ganaste! üíñ';
                ahorcadoGameActive = false;
            } else if (ahorcadoWrongGuesses >= ahorcadoVidasEmojis.length - 1) {
                // Derrota
                ahorcadoStatus.innerHTML = 'üòµ ¬°Oh no! La palabra era: ' + ahorcadoWord;
                ahorcadoGameActive = false;
            }
        }

        // ======================================================
        // --- JUEGO 5: UNIDOS POR LA ETERNIDAD ---
        // ======================================================
        let unidosCanvas, unidosCtx, unidosStatus;
        let unidosPlayer, unidosTarget, unidosObstacles, unidosKeys, unidosGameWon;
        let gameUnidosContainer; 

        // TAMA√ëO CONTROLADO POR C√ìDIGO
        let playerW = 60; 
        let playerH = 70; 
        let targetW = 50; 
        let targetH = 60; 
        
        // IMAGENES 
        let unidosPlayerImg = new Image();
        unidosPlayerImg.src = 'imagenes/Novio.png'; 
        
        let unidosTargetImg = new Image();
        unidosTargetImg.src = 'imagenes/Novia.png'; 
        
        let unidosWinImg = new Image();
        unidosWinImg.src = 'imagenes/Novios.png'; 
        
        let imagesLoaded = 0;
        const totalImages = 3;

        unidosPlayerImg.onload = () => { imagesLoaded++; };
        unidosTargetImg.onload = () => { imagesLoaded++; };
        unidosWinImg.onload = () => { imagesLoaded++; };

        function initUnidos() {
            unidosCanvas = document.getElementById('unidosCanvas');
            unidosCtx = unidosCanvas.getContext('2d');
            unidosStatus = document.getElementById('unidosStatus');
            gameUnidosContainer = document.getElementById('game-unidos'); 
            
            unidosKeys = {
                ArrowUp: false,
                ArrowDown: false,
                ArrowLeft: false,
                ArrowRight: false
            };
            
            resetUnidos(); 

            // Listeners de teclado y movimientos
            window.addEventListener('keydown', handleUnidosKeyDown);
            window.addEventListener('keyup', handleUnidosKeyUp);
            
            // Iniciar el Game Loop
            unidosGameLoop();
        }

        // MANEJO DE TECLAS PARA EVITAR DESPLAZAMIENTO 
        function handleUnidosKeyDown(e) {
            // Solo prevenir el comportamiento por defecto si el juego de unidos est√° visible
            if (!gameUnidosContainer || gameUnidosContainer.classList.contains('hidden')) return;

            if (unidosKeys.hasOwnProperty(e.key)) {
                unidosKeys[e.key] = true;
                // Prevenir desplazamiento de la ventana con las flechas
                if (['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'].includes(e.key)) {
                    e.preventDefault();
                }
            }
        }

        function handleUnidosKeyUp(e) {
            if (unidosKeys.hasOwnProperty(e.key)) {
                unidosKeys[e.key] = false;
            }
        }

        function resetUnidos() {
            // Usa las variables de tama√±o definidas al inicio de la secci√≥n de Unidos
            unidosPlayer = { x: 30, y: unidosCanvas.height / 2 - playerH / 2, width: playerW, height: playerH, speed: 4 };
            unidosTarget = { x: unidosCanvas.width - targetW - 30, y: unidosCanvas.height / 2 - targetH / 2, width: targetW, height: targetH };
            
            // Laberinto (los obst√°culos siguen siendo simples rect√°ngulos)
            unidosObstacles = [
                { x: 100, y: 0, width: 20, height: 150 },
                { x: 100, y: 250, width: 20, height: 250 },
                { x: 200, y: 100, width: 20, height: 400 },
                { x: 300, y: 0, width: 20, height: 350 },
                { x: 300, y: 450, width: 20, height: 50 },
                { x: 400, y: 100, width: 20, height: 400 },
                { x: 500, y: 0, width: 20, height: 200 },
                { x: 500, y: 300, width: 20, height: 200 },
                { x: 600, y: 150, width: 20, height: 350 },
            ];
            unidosGameWon = false;
            unidosStatus.innerHTML = '';
        }

        function unidosGameLoop() {
            if (!unidosGameWon) {
                updateUnidos();
            }
            drawUnidos();
            requestAnimationFrame(unidosGameLoop);
        }

        function updateUnidos() {
            // Movimiento
            if (unidosKeys.ArrowUp && unidosPlayer.y > 0) unidosPlayer.y -= unidosPlayer.speed;
            if (unidosKeys.ArrowDown && unidosPlayer.y < unidosCanvas.height - unidosPlayer.height) unidosPlayer.y += unidosPlayer.speed;
            if (unidosKeys.ArrowLeft && unidosPlayer.x > 0) unidosPlayer.x -= unidosPlayer.speed;
            if (unidosKeys.ArrowRight && unidosPlayer.x < unidosCanvas.width - unidosPlayer.width) unidosPlayer.x += unidosPlayer.speed;
            
            // Colisi√≥n con obst√°culos
            unidosObstacles.forEach(obstacle => {
                if (checkCollision(unidosPlayer, obstacle)) {
                    // Si choca, reinicia al jugador
                    unidosPlayer.x = 30;
                    unidosPlayer.y = unidosCanvas.height / 2 - unidosPlayer.height / 2;
                }
            });
            
            // Colisi√≥n con la novia (target)
            if (checkCollision(unidosPlayer, unidosTarget)) {
                unidosGameWon = true;
                unidosStatus.innerHTML = '¬°Unidos por la Eternidad! üíñ';
            }
        }
        
        function checkCollision(rect1, rect2) {
            return (
                rect1.x < rect2.x + rect2.width &&
                rect1.x + rect1.width > rect2.x &&
                rect1.y < rect2.y + rect2.height &&
                rect1.y + rect1.height > rect2.y
            );
        }

        // FUNCI√ìN DE DIBUJO CON IM√ÅGENES 
        function drawUnidos() {
            unidosCtx.clearRect(0, 0, unidosCanvas.width, unidosCanvas.height);
            
            // Dibujar Obst√°culos (laberinto)
            unidosCtx.fillStyle = '#fecdd3'; // rose-200
            unidosObstacles.forEach(obstacle => {
                unidosCtx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
            });

            if (imagesLoaded === totalImages) {
                
                // Dibujar Novia (Target) con Imagen
                unidosCtx.drawImage(unidosTargetImg, unidosTarget.x, unidosTarget.y, unidosTarget.width, unidosTarget.height);

                // Dibujar Novio (Player) con Imagen
                unidosCtx.drawImage(unidosPlayerImg, unidosPlayer.x, unidosPlayer.y, unidosPlayer.width, unidosPlayer.height);

                // Si ganan, dibujar la imagen de victoria
                if (unidosGameWon) {
                    unidosCtx.clearRect(0, 0, unidosCanvas.width, unidosCanvas.height);
                    
                    // Centrar la imagen de victoria
                    const winW = 200;
                    const winH = 150;
                    const winX = unidosCanvas.width / 2 - winW / 2;
                    const winY = unidosCanvas.height / 2 - winH / 2;

                    unidosCtx.drawImage(unidosWinImg, winX, winY, winW, winH);
                    
                    // Texto de victoria sobre la imagen
                    unidosCtx.font = '30px "Playfair Display", serif';
                    unidosCtx.textAlign = 'center';
                    unidosCtx.fillStyle = '#e11d48'; // rose-600
                    unidosCtx.fillText('¬°Felicidades!', unidosCanvas.width / 2, winY - 20);
                }

            } else {
                // Fallback si las im√°genes a√∫n no cargan: dibujar las formas simples
                unidosCtx.fillStyle = 'gray';
                unidosCtx.fillRect(unidosPlayer.x, unidosPlayer.y, unidosPlayer.width, unidosPlayer.height);
                unidosCtx.fillRect(unidosTarget.x, unidosTarget.y, unidosTarget.width, unidosTarget.height);
                
                if (unidosGameWon) {
                    unidosCtx.clearRect(0, 0, unidosCanvas.width, unidosCanvas.height);
                    unidosCtx.font = '50px sans-serif';
                    unidosCtx.textAlign = 'center';
                    unidosCtx.fillText('‚ù§Ô∏è', unidosCanvas.width / 2, unidosCanvas.height / 2);
                }
            }
        }
    </script>
</body>

</html>
